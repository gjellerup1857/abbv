(environment, ...filters) => {
/*!
 * This file is part of eyeo's Anti-Circumvention Snippets module (@eyeo/snippets),
 * Copyright (C) 2006-present eyeo GmbH
 * 
 * @eyeo/snippets is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 * 
 * @eyeo/snippets is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with @eyeo/snippets.  If not, see <http://www.gnu.org/licenses/>.
 */
const e=Proxy,{apply:t,bind:n,call:r}=Function,o=r.bind(t),i=r.bind(n),s=r.bind(r),c={get:(e,t)=>i(r,e[t])},a=t=>new e(t,c),l=(t,n)=>new e(t,{apply:(e,t,r)=>o(n,t,r)}),u={get:(e,t)=>i(e[t],e)},d=t=>new e(t,u),{assign:f,defineProperties:p,freeze:h,getOwnPropertyDescriptor:g,getOwnPropertyDescriptors:w,getPrototypeOf:m}=d(Object),{hasOwnProperty:y}=a({}),{species:b}=Symbol,v={get(e,t){const n=e[t];class r extends n{}const o=w(n.prototype);delete o.constructor,h(p(r.prototype,o));const i=w(n);return delete i.length,delete i.prototype,i[b]={value:r},h(p(r,i))}},E=t=>new e(t,v),x="undefined"!=typeof environment?environment:{};"undefined"==typeof globalThis&&(window.globalThis=window);const{apply:S,ownKeys:M}=d(Reflect),k="world"in x,T=k&&"ISOLATED"===x.world,C=k&&"MAIN"===x.world,O="object"==typeof chrome&&!!chrome.runtime,L="object"==typeof browser&&!!browser.runtime,$=!C&&(T||O||L),P=e=>$?e:N(e,A(e)),{create:N,defineProperties:W,defineProperty:j,freeze:D,getOwnPropertyDescriptor:R,getOwnPropertyDescriptors:A}=d(Object),H=d(globalThis),z=$?globalThis:E(globalThis),{Map:I,RegExp:B,Set:V,WeakMap:F,WeakSet:q}=z,U=(e,t,n=null)=>{const r=M(t);for(const o of M(e)){if(r.includes(o))continue;const i=R(e,o);if(n&&"value"in i){const{value:e}=i;"function"==typeof e&&(i.value=n(e))}j(t,o,i)}},X=e=>{const t=z[e];class n extends t{}const{toString:r,valueOf:o}=t.prototype;W(n.prototype,{toString:{value:r},valueOf:{value:o}});const i=e.toLowerCase(),s=e=>function(){const t=S(e,this,arguments);return typeof t===i?new n(t):t};return U(t,n,s),U(t.prototype,n.prototype,s),n},G=D({frozen:new F,hidden:new q,iframePropertiesToAbort:{read:new V,write:new V},abortedIframes:new F}),J=new B("^[A-Z]");var _=new Proxy(new I([["chrome",$&&(O&&chrome||L&&browser)||void 0],["isExtensionContext",$],["variables",G],["console",P(console)],["document",globalThis.document],["performance",P(performance)],["JSON",P(JSON)],["Map",I],["Math",P(Math)],["Number",$?Number:X("Number")],["RegExp",B],["Set",V],["String",$?String:X("String")],["WeakMap",F],["WeakSet",q],["MouseEvent",MouseEvent]]),{get(e,t){if(e.has(t))return e.get(t);let n=globalThis[t];return"function"==typeof n&&(n=(J.test(t)?z:H)[t]),e.set(t,n),n},has:(e,t)=>e.has(t)});const K={WeakSet:WeakSet,WeakMap:WeakMap,WeakValue:class{has(){return!1}set(){}}},{apply:Q}=Reflect;const{Map:Y,WeakMap:Z,WeakSet:ee,setTimeout:te}=_;let ne=!0,re=e=>{e.clear(),ne=!ne};var oe=function(e){const{WeakSet:t,WeakMap:n,WeakValue:r}=this||K,o=new t,i=new n,s=new r;return function(t){if(o.has(t))return t;if(i.has(t))return i.get(t);if(s.has(t))return s.get(t);const n=Q(e,this,arguments);return o.add(n),n!==t&&("object"==typeof t&&t?i:s).set(t,n),n}}.bind({WeakMap:Z,WeakSet:ee,WeakValue:class extends Y{set(e,t){return ne&&(ne=!ne,te(re,0,this)),super.set(e,t)}}});const{concat:ie,includes:se,join:ce,reduce:ae,unshift:le}=a([]),ue=E(globalThis),{Map:de,WeakMap:fe}=ue,pe=new de,he=t=>{const n=(e=>{const t=[];let n=e;for(;n;){if(pe.has(n))le(t,pe.get(n));else{const e=w(n);pe.set(n,e),le(t,e)}n=m(n)}return le(t,{}),o(f,null,t)})("function"==typeof t?t.prototype:t),r={get(e,t){if(t in n){const{value:r,get:o}=n[t];if(o)return s(o,e);if("function"==typeof r)return i(r,e)}return e[t]},set(e,t,r){if(t in n){const{set:o}=n[t];if(o)return s(o,e,r),!0}return e[t]=r,!0}};return t=>new e(t,r)},{isExtensionContext:ge,Array:we,Number:me,String:ye,Object:be}=_,{isArray:ve}=we,{getOwnPropertyDescriptor:Ee,setPrototypeOf:xe}=be,{toString:Se}=be.prototype,{slice:Me}=ye.prototype,{get:ke}=Ee(Node.prototype,"nodeType"),Te=ge?{}:{Attr:he(Attr),CanvasRenderingContext2D:he(CanvasRenderingContext2D),CSSStyleDeclaration:he(CSSStyleDeclaration),Document:he(Document),Element:he(Element),HTMLCanvasElement:he(HTMLCanvasElement),HTMLElement:he(HTMLElement),HTMLImageElement:he(HTMLImageElement),HTMLScriptElement:he(HTMLScriptElement),MutationRecord:he(MutationRecord),Node:he(Node),ShadowRoot:he(ShadowRoot),get CSS2Properties(){return Te.CSSStyleDeclaration}},Ce=(e,t)=>{if("Element"!==t&&t in Te)return Te[t](e);if(ve(e))return xe(e,we.prototype);const n=(e=>s(Me,s(Se,e),8,-1))(e);if(n in Te)return Te[n](e);if(n in _)return xe(e,_[n].prototype);if("nodeType"in e)switch(s(ke,e)){case 1:if(!(t in Te))throw new Error("unknown hint "+t);return Te[t](e);case 2:return Te.Attr(e);case 3:return Te.Node(e);case 9:return Te.Document(e)}throw new Error("unknown brand "+n)};var Oe=ge?e=>e===window||e===globalThis?_:e:oe(((e,t="Element")=>{if(e===window||e===globalThis)return _;switch(typeof e){case"object":return e&&Ce(e,t);case"string":return new ye(e);case"number":return new me(e);default:throw new Error("unsupported value")}}));const Le={get(e,t){const n=e;for(;!y(e,t);)e=m(e);const{get:r,set:i}=g(e,t);return function(){return arguments.length?o(i,n,arguments):s(r,n)}}},$e=t=>new e(t,Le);let Pe=!1;function Ne(){return Pe}function We(){Pe=!0}const{console:je}=Oe(window),De=()=>{};function Re(...e){if(Ne()){const t=["%c DEBUG","font-weight: bold;"],n=e.indexOf("error"),r=e.indexOf("warn"),o=e.indexOf("success"),i=e.indexOf("info");-1!==n?(t[0]+=" - ERROR",t[1]+="color: red; border:2px solid red",Oe(e).splice(n,1)):-1!==r?(t[0]+=" - WARNING",t[1]+="color: orange; border:2px solid orange ",Oe(e).splice(r,1)):-1!==o?(t[0]+=" - SUCCESS",t[1]+="color: green; border:2px solid green",Oe(e).splice(o,1)):-1!==i&&(t[1]+="color: black;",Oe(e).splice(i,1)),Oe(e).unshift(...t)}je.log(...e)}function Ae(e){return i(Ne()?Re:De,null,e)}let{Math:He,RegExp:ze}=Oe(window);function Ie(e){let{length:t}=e;if(t>1&&"/"===e[0]){let n="/"===e[t-1];if(n||t>2&&Oe(e).endsWith("/i")){let t=[Oe(e).slice(1,n?-1:-2)];return n||t.push("i"),new ze(...t)}}return new ze(Oe(e).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))}function Be(){return Oe(He.floor(2116316160*He.random()+60466176)).toString(36)}let{parseFloat:Ve,variables:Fe,Array:qe,Error:Ue,Map:Xe,Object:Ge,ReferenceError:Je,Set:_e,WeakMap:Ke}=Oe(window),{onerror:Qe}=$e(window),Ye=Node.prototype,Ze=Element.prototype,et=null;function tt(e,t,n,r=!0){let o=Oe(t),i=o.indexOf(".");if(-1==i){let o=Ge.getOwnPropertyDescriptor(e,t);if(o&&!o.configurable)return;let i=Ge.assign({},n,{configurable:r});if(!o&&!i.get&&i.set){let n=e[t];i.get=()=>n}return void Ge.defineProperty(e,t,i)}let s=o.slice(0,i).toString();t=o.slice(i+1).toString();let c=e[s];!c||"object"!=typeof c&&"function"!=typeof c||tt(c,t,n);let a=Ge.getOwnPropertyDescriptor(e,s);if(a&&!a.configurable)return;et||(et=new Ke),et.has(e)||et.set(e,new Xe);let l=et.get(e);if(l.has(s))return void l.get(s).set(t,n);let u=new Xe([[t,n]]);l.set(s,u),Ge.defineProperty(e,s,{get:()=>c,set(e){if(c=e,c&&("object"==typeof c||"function"==typeof c))for(let[e,t]of u)tt(c,e,t)},configurable:r})}function nt(e){let t=Qe();Qe(((...n)=>{let r=n.length&&n[0];return!("string"!=typeof r||!Oe(r).includes(e))||("function"==typeof t?o(t,this,n):void 0)}))}function rt(e,t,n,r=!0){let o=Ae(e);if(!n)return void o("error","no property to abort on read");let i=Be();o("info",`aborting on ${n} access`),tt(t,n,{get:function(){throw o("success",`${n} access aborted`),new Je(i)},set(){}},r),nt(i)}function ot(e,t,n,r=!0){let o=Ae(e);if(!n)return void o("error","no property to abort on write");let i=Be();o("info",`aborting when setting ${n}`),tt(t,n,{set:function(){throw o("success",`setting ${n} aborted`),new Je(i)}},r),nt(i)}function it(e,t=!1,n=!1){let r=Fe.abortedIframes,i=Fe.iframePropertiesToAbort;for(let o of qe.from(window.frames))if(r.has(o))for(let i of e)t&&r.get(o).read.add(i),n&&r.get(o).write.add(i);for(let r of e)t&&i.read.add(r),n&&i.write.add(r);function c(){for(let e of qe.from(window.frames)){r.has(e)||r.set(e,{read:new _e(i.read),write:new _e(i.write)});let t=r.get(e).read;if(t.size>0){let n=qe.from(t);t.clear();for(let t of n)rt("abort-on-iframe-property-read",e,t)}let n=r.get(e).write;if(n.size>0){let t=qe.from(n);n.clear();for(let n of t)ot("abort-on-iframe-property-write",e,n)}}}c(),r.has(document)||(r.set(document,!0),function(e){let t;function n(e,t){for(let n of t){tt(e,n,r(e,n))}}function r(t,n){let r=t[n];return{get:()=>function(...t){let n;return n=o(r,this,t),e&&e(),n}}}function i(t,n){let r=Ge.getOwnPropertyDescriptor(t,n),{set:o}=r||{};return{set(t){let n;return n=s(o,this,t),e&&e(),n}}}n(Ye,["appendChild","insertBefore","replaceChild"]),n(Ze,["append","prepend","replaceWith","after","before","insertAdjacentElement","insertAdjacentHTML"]),t=i(Ze,"innerHTML"),tt(Ze,"innerHTML",t),t=i(Ze,"outerHTML"),tt(Ze,"outerHTML",t)}(c))}let{Object:st}=window;function ct(e,t){if(!(e instanceof st))return;let n=e,r=Oe(t).split(".");if(0===r.length)return;for(let e=0;e<r.length-1;e++){let t=r[e];if(!y(n,t))return;if(n=n[t],!(n instanceof st))return}let o=r[r.length-1];return y(n,o)?[n,o]:void 0}const at=Oe(/^\d+$/);function lt(e){switch(e){case"false":return!1;case"true":return!0;case"null":return null;case"noopFunc":return()=>{};case"trueFunc":return()=>!0;case"falseFunc":return()=>!1;case"emptyArray":return[];case"emptyObj":return{};case"undefined":return;case"":return e;default:if(at.test(e))return Ve(e);throw new Ue(`[override-property-read snippet]: Value "${e}" is not valid.`)}}function ut(e,t,n){var r,o;n?"load"===n?(e("info","Waiting until window.load"),window.addEventListener("load",(()=>{e("info","Window.load fired."),t()}))):"loading"===n||"interactive"===n||"complete"===n?(e("info","Waiting document state until :",n),document.addEventListener("readystatechange",(()=>{e("info","Document state changed:",document.readyState),document.readyState===n&&t()}))):(e("info","Waiting until ",n," event is triggered on document"),(r=document,o=n,new Promise((e=>{const t=()=>{r.removeEventListener(o,t),e()};r.addEventListener(o,t)}))).then((()=>{e("info",n," is triggered on document, starting the snippet"),t()})).catch((t=>{e("error","There was an error while waiting for the event.",t)}))):t()}let{HTMLScriptElement:dt,Object:ft,ReferenceError:pt}=Oe(window),ht=ft.getPrototypeOf(dt);let{Error:gt,URL:wt}=Oe(window),{cookie:mt}=$e(document);let{console:yt,document:bt,getComputedStyle:vt,isExtensionContext:Et,variables:xt,Array:St,MutationObserver:Mt,Object:kt,XPathEvaluator:Tt,XPathExpression:Ct,XPathResult:Ot}=Oe(window);const{querySelectorAll:Lt}=bt,$t=Lt&&i(Lt,bt);function Pt(e,t=!1){try{const n=navigator.userAgent.includes("Firefox")?e.openOrClosedShadowRoot:browser.dom.openOrClosedShadowRoot(e);return null===n&&Ne()&&!t&&yt.log("Shadow root not found or not added in element yet",e),n}catch(n){return Ne()&&!t&&yt.log("Error while accessing shadow root",e,n),null}}function Nt(e,t=!1){return Dt(e,$t.bind(bt),bt,t)}function Wt(e,t,n,r){const o=t.getAttribute("xlink:href")||t.getAttribute("href");if(o){const s=$t(o)[0];if(!s&&Ne())return yt.log("No elements found matching",o),!1;if(!(i=e)||0===i.length||i.every((e=>""===e.trim()))){const e=r.length>0?r:[];return n.push({element:s,rootParents:[...e,t]}),!1}const c=s.querySelectorAll.bind(s);return{nextBoundElement:s,nestedSelectorsString:e.join("^^"),next$$:c}}var i}function jt(e,t){const n=Pt(t);if(n){const{querySelectorAll:r}=n,o=r&&i(r,n).bind(n);return{nextBoundElement:t,nestedSelectorsString:":host "+e.join("^^"),next$$:o}}return!1}function Dt(e,t,n,r,o=[]){if(e.includes("^^")){const[i,s,...c]=e.split("^^");let a,l;switch(s){case"svg":l=Wt;break;case"sh":l=jt;break;default:return Ne()&&yt.log(s," is not supported. Supported commands are: \n^^sh^^\n^^svg^^"),[]}a=""===i.trim()?[n]:t(i);const u=[];for(const e of a){const t=l(c,e,u,o);if(!t)continue;const{next$$:n,nestedSelectorsString:i,nextBoundElement:s}=t,a=Dt(i,n,s,r,[...o,e]);a&&u.push(...a)}return u}const i=t(e);return r?[...i].map((e=>({element:e,rootParents:o.length>0?o:[]}))):i}function Rt(e,t,n=[]){if(t.includes("^^svg^^")&&(t=t.split("^^svg^^")[0]),t.includes("^^sh^^")){const r=t.split("^^sh^^"),o=r.length-1;if(t=`:host ${r[o]}`,o===n.length)return e.closest(t);return n[o].closest(t)}return n[0]?n[0].closest(t):e.closest(t)}const{assign:At,setPrototypeOf:Ht}=kt;class zt extends Ct{evaluate(...e){return Ht(o(super.evaluate,this,e),Ot.prototype)}}class It extends Tt{createExpression(...e){return Ht(o(super.createExpression,this,e),zt.prototype)}}function Bt(e){if(xt.hidden.has(e))return!1;!function(e){Et&&"function"==typeof checkElement&&checkElement(e)}(e),xt.hidden.add(e);let{style:t}=Oe(e),n=Oe(t,"CSSStyleDeclaration"),r=Oe([]),{debugCSSProperties:o}=x;for(let[e,t]of o||[["display","none"]])n.setProperty(e,t,"important"),r.push([e,n.getPropertyValue(e)]);return new Mt((()=>{for(let[e,t]of r){let r=n.getPropertyValue(e),o=n.getPropertyPriority(e);r==t&&"important"==o||n.setProperty(e,t,"important")}})).observe(e,{attributes:!0,attributeFilter:["style"]}),!0}function Vt(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let e=t.slice(6,-1),n=(new It).createExpression(e,null),r=Ot.ORDERED_NODE_SNAPSHOT_TYPE;return e=>{if(!e)return;let t=n.evaluate(bt,r,null),{snapshotLength:o}=t;for(let n=0;n<o;n++)e(t.snapshotItem(n))}}return t=>Nt(e).forEach(t)}function Ft(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let t=Vt(e);return()=>{let e=Oe([]);return t((t=>e.push(t))),e}}return()=>St.from(Nt(e))}function qt(e,t,n,r){let o;null==n&&(n=t);const i=()=>{for(const{element:i,rootParents:s}of Nt(n,!0)){const n=Rt(Oe(i),t,s);n&&e(i,n,s)&&(o(),Bt(n)&&"function"==typeof r&&r(n))}};return At(new Mt(i),{race(e){o=e,this.observe(bt,{childList:!0,characterData:!0,subtree:!0}),i()}})}function Ut(e,t,n,r){let o=Oe(t,"CSSStyleDeclaration");if("none"==o.getPropertyValue("display"))return!1;let i=o.getPropertyValue("visibility");if("hidden"==i||"collapse"==i)return!1;if(!n||e==n)return!0;let s=Oe(e).parentElement;if(!s){if(!r||!r.length)return!0;s=r[r.length-1],r=r.slice(0,-1)}return Ut(s,vt(s),n,r)}function Xt(e){let t=vt(e),{cssText:n}=t;if(n)return n;for(let e of t)n+=`${e}: ${t[e]}; `;return Oe(n).trim()}let{ELEMENT_NODE:Gt,TEXT_NODE:Jt,prototype:_t}=Node,{prototype:Kt}=Element,{prototype:Qt}=HTMLElement,{console:Yt,variables:Zt,DOMParser:en,Error:tn,MutationObserver:nn,Object:rn,ReferenceError:on}=Oe(window),{getOwnPropertyDescriptor:sn}=rn;let{Array:cn,Error:an,Map:ln,parseInt:un}=Oe(window),dn=null,fn=null;function pn(e,t){if(null===dn)return De;let n=dn,{participants:r}=n;return r.set(o,t),o;function o(){if(n.winners<1)return;if(Ae("race")("success",`${e} won the race`),n===dn)fn.push(o);else if(r.delete(o),--n.winners<1){for(let e of r.values())e();r.clear()}}}const{Map:hn,MutationObserver:gn,Object:wn,Set:mn,WeakSet:yn}=Oe(window);let bn=Element.prototype,{attachShadow:vn}=bn,En=new yn,xn=new hn,Sn=null;const{Error:Mn,JSON:kn,Map:Tn,Response:Cn,Object:On}=Oe(window);let Ln=null;let{Error:$n,JSON:Pn,Map:Nn,Object:Wn,Response:jn}=Oe(window),Dn=null;let{Error:Rn}=Oe(window);let{Error:An,Map:Hn,Object:zn,console:In}=Oe(window),{toString:Bn}=Function.prototype,Vn=EventTarget.prototype,{addEventListener:Fn}=Vn,qn=null;let Un,{fetch:Xn,Map:Gn,Object:Jn,RegExp:_n,Response:Kn}=Oe(window);let Qn,Yn,{RegExp:Zn,XMLHttpRequest:er,WeakMap:tr}=Oe(window);let nr,{URL:rr,fetch:or}=Oe(window),{delete:ir,has:sr}=a(URLSearchParams.prototype);const cr={"abort-current-inline-script":function(e,t=null){const n=Ae("abort-current-inline-script"),r=t?Ie(t):null,o=Be(),i=Oe(document).currentScript;let c=window;const a=Oe(e).split("."),l=Oe(a).pop();for(let e of Oe(a))if(c=c[e],!c||"object"!=typeof c&&"function"!=typeof c)return void n("warn",a," is not found");const{get:u,set:d}=ft.getOwnPropertyDescriptor(c,l)||{};let f=c[l];void 0===f&&n("warn","The property",l,"doesn't exist yet. Check typos.");const p=()=>{const e=Oe(document).currentScript;if(e instanceof ht&&""==Oe(e,"HTMLScriptElement").src&&e!=i&&(!r||r.test(Oe(e).textContent)))throw n("success",a," is aborted \n",e),new pt(o)};tt(c,l,{get(){return p(),u?s(u,this):f},set(e){p(),d?s(d,this,e):f=e}}),nt(o)},"abort-on-iframe-property-read":function(...e){it(e,!0,!1)},"abort-on-iframe-property-write":function(...e){it(e,!1,!0)},"abort-on-property-read":function(e,t){rt("abort-on-property-read",window,e,!("false"===t))},"abort-on-property-write":function(e,t){ot("abort-on-property-write",window,e,!("false"===t))},"cookie-remover":function(e,t=!1){if(!e)throw new gt("[cookie-remover snippet]: No cookie to remove.");let n=Ae("cookie-remover"),r=Ie(e);if(!Oe(/^http|^about/).test(location.protocol))return void n("warn","Snippet only works for http or https and about.");function o(){return Oe(mt()).split(";").filter((e=>r.test(Oe(e).split("=")[0])))}const i=()=>{n("info","Parsing cookies for matches");for(const e of Oe(o())){let t=Oe(location.hostname);!t&&Oe(location.ancestorOrigins)&&Oe(location.ancestorOrigins[0])&&(t=new wt(Oe(location.ancestorOrigins[0])).hostname);const r=Oe(e).split("=")[0],o="expires=Thu, 01 Jan 1970 00:00:00 GMT",i="path=/",s=t.split(".");for(let e=s.length;e>0;e--){const t=s.slice(s.length-e).join(".");mt(`${Oe(r).trim()}=;${o};${i};domain=${t}`),mt(`${Oe(r).trim()}=;${o};${i};domain=.${t}`),n("success",`Set expiration date on ${r}`)}}};if(i(),t){let e=o();setInterval((()=>{let t=o();if(t!==e)try{i()}finally{e=t}}),1e3)}},debug:We,"freeze-element":function(e,t="",...n){let r,i,c=!1,a=!1,l=Oe(n).filter((e=>!h(e))),u=Oe(n).filter((e=>h(e))).map(Ie),d=Be(),f=Ft(e);!function(){let n=Oe(t).split("+");1===n.length&&""===n[0]&&(n=[]);for(let t of n)switch(t){case"subtree":c=!0;break;case"abort":a=!0;break;default:throw new tn("[freeze] Unknown option passed to the snippet. [selector]: "+e+" [option]: "+t)}}();let p={selector:e,shouldAbort:a,rid:d,exceptionSelectors:l,regexExceptions:u,changeId:0};function h(e){return e.length>=2&&"/"==e[0]&&"/"==e[e.length-1]}function g(){i=f(),w(i,!1)}function w(e,t=!0){for(let n of e)Zt.frozen.has(n)||(Zt.frozen.set(n,p),!t&&c&&new nn((e=>{for(let t of Oe(e))w(Oe(t,"MutationRecord").addedNodes)})).observe(n,{childList:!0,subtree:!0}),c&&Oe(n).nodeType===Gt&&w(Oe(n).childNodes))}function m(e,...t){Re(`[freeze][${e}] `,...t)}function y(e,t,n,r){let o=r.selector,i=r.changeId,s="string"==typeof e,c=r.shouldAbort?"aborting":"watching";switch(Yt.groupCollapsed(`[freeze][${i}] ${c}: ${o}`),n){case"appendChild":case"append":case"prepend":case"insertBefore":case"replaceChild":case"insertAdjacentElement":case"insertAdjacentHTML":case"insertAdjacentText":case"innerHTML":case"outerHTML":m(i,s?"text: ":"node: ",e),m(i,"added to node: ",t);break;case"replaceWith":case"after":case"before":m(i,s?"text: ":"node: ",e),m(i,"added to node: ",Oe(t).parentNode);break;case"textContent":case"innerText":case"nodeValue":m(i,"content of node: ",t),m(i,"changed to: ",e)}m(i,`using the function "${n}"`),Yt.groupEnd(),r.changeId++}function b(e,t){if(t)for(let n of t)if(n.test(e))return!0;return!1}function v(e){throw new on(e)}function E(e,t,n,r){let o=new en,{body:i}=Oe(o.parseFromString(e,"text/html")),s=x(Oe(i).childNodes,t,n,r);return Oe(s).map((e=>{switch(Oe(e).nodeType){case Gt:return Oe(e).outerHTML;case Jt:return Oe(e).textContent;default:return""}})).join("")}function x(e,t,n,r){let o=Oe([]);for(let i of e)S(i,t,n,r)&&o.push(i);return o}function S(e,t,n,r){let o=r.shouldAbort,i=r.regexExceptions,s=r.exceptionSelectors,c=r.rid;if("string"==typeof e){let s=e;return!!b(s,i)||(Ne()&&y(s,t,n,r),o&&v(c),Ne())}let a=e;switch(Oe(a).nodeType){case Gt:return!!function(e,t){if(t){let n=Oe(e);for(let e of t)if(n.matches(e))return!0}return!1}(a,s)||(o&&(Ne()&&y(a,t,n,r),v(c)),!!Ne()&&(Bt(a),y(a,t,n,r),!0));case Jt:return!!b(Oe(a).textContent,i)||(Ne()&&y(a,t,n,r),o&&v(c),!1);default:return!0}}function M(e,t,n,r){let i=sn(e,t)||{},c=i.get&&s(i.get,e)||i.value;if(c)return{get:()=>function(...e){if(n(this)){let n=r(this);if(n){let r=e[0];if(!S(r,this,t,n))return r}}return o(c,this,e)}}}function k(e,t,n,r){let i=sn(e,t)||{},c=i.get&&s(i.get,e)||i.value;if(c)return{get:()=>function(...e){if(!n(this))return o(c,this,e);let i=r(this);if(!i)return o(c,this,e);let s=x(e,this,t,i);return s.length>0?o(c,this,s):void 0}}}function T(e,t,n,r){let i=sn(e,t)||{},c=i.get&&s(i.get,e)||i.value;if(c)return{get:()=>function(...e){let[i,a]=e,l="afterbegin"===i||"beforeend"===i;if(n(this,l)){let e=r(this,l);if(e){let n,r=l?this:Oe(this).parentNode;switch(t){case"insertAdjacentElement":if(!S(a,r,t,e))return a;break;case"insertAdjacentHTML":return n=E(a,r,t,e),n?s(c,this,i,n):void 0;case"insertAdjacentText":if(!S(a,r,t,e))return}}}return o(c,this,e)}}}function C(e,t,n,r){let o=sn(e,t)||{},{set:i}=o;if(i)return{set(e){if(!n(this))return s(i,this,e);let o=r(this);if(!o)return s(i,this,e);let c=E(e,this,t,o);return c?s(i,this,c):void 0}}}function O(e,t,n,r){let o=sn(e,t)||{},{set:i}=o;if(i)return{set(e){if(!n(this))return s(i,this,e);let o=r(this);return o?S(e,this,t,o)?s(i,this,e):void 0:s(i,this,e)}}}Zt.frozen.has(document)||(Zt.frozen.set(document,!0),function(){let e;function t(e){return e&&Zt.frozen.has(e)}function n(e){try{return e&&(Zt.frozen.has(e)||Zt.frozen.has(Oe(e).parentNode))}catch(e){return!1}}function r(e,t){try{return e&&(Zt.frozen.has(e)&&t||Zt.frozen.has(Oe(e).parentNode)&&!t)}catch(e){return!1}}function o(e){return Zt.frozen.get(e)}function i(e){try{if(Zt.frozen.has(e))return Zt.frozen.get(e);let t=Oe(e).parentNode;return Zt.frozen.get(t)}catch(e){}}function s(e,t){try{if(Zt.frozen.has(e)&&t)return Zt.frozen.get(e);let n=Oe(e).parentNode;return Zt.frozen.get(n)}catch(e){}}e=M(_t,"appendChild",t,o),tt(_t,"appendChild",e),e=M(_t,"insertBefore",t,o),tt(_t,"insertBefore",e),e=M(_t,"replaceChild",t,o),tt(_t,"replaceChild",e),e=k(Kt,"append",t,o),tt(Kt,"append",e),e=k(Kt,"prepend",t,o),tt(Kt,"prepend",e),e=k(Kt,"replaceWith",n,i),tt(Kt,"replaceWith",e),e=k(Kt,"after",n,i),tt(Kt,"after",e),e=k(Kt,"before",n,i),tt(Kt,"before",e),e=T(Kt,"insertAdjacentElement",r,s),tt(Kt,"insertAdjacentElement",e),e=T(Kt,"insertAdjacentHTML",r,s),tt(Kt,"insertAdjacentHTML",e),e=T(Kt,"insertAdjacentText",r,s),tt(Kt,"insertAdjacentText",e),e=C(Kt,"innerHTML",t,o),tt(Kt,"innerHTML",e),e=C(Kt,"outerHTML",n,i),tt(Kt,"outerHTML",e),e=O(_t,"textContent",t,o),tt(_t,"textContent",e),e=O(Qt,"innerText",t,o),tt(Qt,"innerText",e),e=O(_t,"nodeValue",t,o),tt(_t,"nodeValue",e)}()),r=new nn(g),r.observe(document,{childList:!0,subtree:!0}),g()},"hide-if-shadow-contains":function(e,t="*"){let n=`${e}\\${t}`;xn.has(n)||xn.set(n,[Ie(e),t,pn("hide-if-shadow-contains",(()=>{xn.delete(n)}))]);const r=Ae("hide-if-shadow-contain");Sn||(Sn=new gn((e=>{let t=new mn;for(let{target:n}of Oe(e)){let e=Oe(n).parentNode;for(;e;)[n,e]=[e,Oe(n).parentNode];if(!En.has(n)&&!t.has(n)){t.add(n);for(let[e,t,o]of xn.values())if(e.test(Oe(n).textContent)){let e=Oe(n.host).closest(t);e&&(o(),Oe(n).appendChild(document.createElement("style")).textContent=":host {display: none !important}",Bt(e),En.add(n),r("success","Hiding: ",e," for params: ",...arguments))}}}})),wn.defineProperty(bn,"attachShadow",{value:l(vn,(function(){let e=o(vn,this,arguments);return r("info","attachShadow is called for: ",e),Sn.observe(e,{childList:!0,characterData:!0,subtree:!0}),e}))}))},"json-override":function(e,t,n="",r=""){if(!e)throw new Mn("[json-override snippet]: Missing paths to override.");if(void 0===t)throw new Mn("[json-override snippet]: No value to override with.");if(!Ln){let i=Ae("json-override");function s(e,t){for(let{prune:n,needle:r,filter:o,value:s}of Ln.values())if(!o||o.test(t)){if(Oe(r).some((t=>!ct(e,t))))return e;for(let t of n){let n=ct(e,t);void 0!==n&&(i("success",`Found ${t} replaced it with ${s}`),n[0][n[1]]=lt(s))}}return e}let{parse:c}=kn;Ln=new Tn,On.defineProperty(window.JSON,"parse",{value:l(c,(function(e){return s(o(c,this,arguments),e)}))}),i("info","Wrapped JSON.parse for override");let{json:a}=Cn.prototype;On.defineProperty(window.Response.prototype,"json",{value:l(a,(function(e){return o(a,this,arguments).then((t=>s(t,e)))}))}),i("info","Wrapped Response.json for override")}Ln.set(e,{prune:Oe(e).split(/ +/),needle:n.length?Oe(n).split(/ +/):[],filter:r?Ie(r):null,value:t})},"json-prune":function(e,t=""){if(!e)throw new $n("Missing paths to prune");if(!Dn){let n=Ae("json-prune");function r(e){for(let{prune:t,needle:r}of Dn.values()){if(Oe(r).some((t=>!ct(e,t))))return e;for(let r of t){let t=ct(e,r);void 0!==t&&(n("success",`Found ${r} and deleted`),delete t[0][t[1]])}}return e}let{parse:i}=Pn;Dn=new Nn,Wn.defineProperty(window.JSON,"parse",{value:l(i,(function(){return r(o(i,this,arguments))}))}),n("info","Wrapped JSON.parse for prune");let{json:s}=jn.prototype;Wn.defineProperty(window.Response.prototype,"json",{value:l(s,(function(){return o(s,this,arguments).then((e=>r(e)))}))}),n("info","Wrapped Response.json for prune")}Dn.set(e,{prune:Oe(e).split(/ +/),needle:t.length?Oe(t).split(/ +/):[]})},"override-property-read":function(e,t,n){if(!e)throw new Rn("[override-property-read snippet]: No property to override.");if(void 0===t)throw new Rn("[override-property-read snippet]: No value to override with.");let r=Ae("override-property-read"),o=lt(t);r("info",`Overriding ${e}.`);const i=!("false"===n);tt(window,e,{get:()=>(r("success",`${e} override done.`),o),set(){}},i)},"prevent-listener":function(e,t,n){if(!e)throw new An("[prevent-listener snippet]: No event type.");if(!qn){qn=new Hn;let e=Ae("[prevent]");zn.defineProperty(Vn,"addEventListener",{value:l(Fn,(function(t,n){for(let{evt:r,handlers:o,selectors:i}of qn.values()){if(!r.test(t))continue;let c=this instanceof Element;for(let a=0;a<o.length;a++){const l=o[a],u=i[a];if(!u||c&&Oe(this).matches(u)){if(l){const t=function(){try{const e=String("function"==typeof n?n:n.handleEvent);return l.test(e)}catch(t){return e("error","Error while trying to stringify listener: ",t),!1}};if(!function(){try{const e=s(Bn,"function"==typeof n?n:n.handleEvent);return l.test(e)}catch(t){return e("error","Error while trying to stringify listener: ",t),!1}}()&&!t())continue}return void(Ne()&&(In.groupCollapsed("DEBUG [prevent] was successful"),e("success",`type: ${t} matching ${r}`),e("success","handler:",n),l&&e("success",`matching ${l}`),u&&e("success","on element: ",this,` matching ${u}`),e("success","was prevented from being added"),In.groupEnd()))}}}return o(Fn,this,arguments)}))}),e("info","Wrapped addEventListener")}qn.has(e)||qn.set(e,{evt:Ie(e),handlers:[],selectors:[]});let{handlers:r,selectors:i}=qn.get(e);r.push(t?Ie(t):null),i.push(n)},"replace-fetch-response":function(e,t="",n=null){const r=Ae("replace-fetch-response");if(!e)return void r("error","The parameter 'search' is required");Un||(Un=new Gn,r("info","Network API proxied"),window.fetch=l(Xn,((...e)=>o(Xn,self,e).then((e=>Oe(e).clone().text().then((t=>{let n=Oe(t);for(const[e,{replacement:o,needle:i}]of Un){if(i){if(!Ie(i).test(n)){Ne()&&(console.groupCollapsed(`DEBUG [replace-fetch-response] warn: '${i}' not found in fetch response`),r("warn",`${n}`),console.groupEnd());continue}Ne()&&(console.groupCollapsed(`DEBUG [replace-fetch-response] success: '${i}' found in fetch response`),r("success",`${n}`),console.groupEnd())}n=n.replace(e,o),Ne()&&n!==t&&(console.groupCollapsed(`DEBUG [replace-fetch-response] success: '${e}' replaced with '${o}' in fetch response`),r("success",`${n}`),console.groupEnd())}if(n===t)return e;const o=new Kn(n,{status:e.status,statusText:e.statusText,headers:e.headers});return Jn.defineProperties(o,{ok:{value:e.ok},redirected:{value:e.redirected},type:{value:e.type},url:{value:e.url}}),o})))))));const i=Ie(e),s=new _n(i,"g");Un.set(s,{replacement:t,needle:n})},"replace-xhr-response":function(e,t="",n=null){const r=Ae("replace-xhr-response");if(!e)return void r("error","The parameter 'pattern' is required");Qn||(Qn=new tr,Yn=new Map,r("info","XMLHttpRequest proxied"),window.XMLHttpRequest=class extends er{open(e,t,...n){const r={method:e,url:t};return Qn.set(this,r),super.open(e,t,...n)}get response(){const e=super.response,t=Qn.get(this);if(void 0===t)return e;const n="string"==typeof e?e.length:void 0;if(t.lastResponseLength!==n&&(t.response=void 0,t.lastResponseLength=n),void 0!==t.response)return t.response;if("string"!=typeof e)return t.response=e;let o=e;for(const[t,{replacement:n,needle:i}]of Yn){if(i){if(!Ie(i).test(o)){Ne()&&(console.groupCollapsed(`DEBUG [replace-xhr-response] warn: '${i}' not found in XHR response`),r("warn",`${o}`),console.groupEnd());continue}Ne()&&(console.groupCollapsed(`DEBUG [replace-xhr-response] success: '${i}' found in XHR response`),r("success",`${o}`),console.groupEnd())}o=Oe(o).replace(t,n).toString(),Ne()&&e!==o&&(console.groupCollapsed(`DEBUG [replace-xhr-response] success: '${t}' replaced with '${n}' in XHR response`),r("success",`${o}`),console.groupEnd())}return t.response=o}get responseText(){const e=this.response;return"string"!=typeof e?super.responseText:e}});const o=Ie(e),i=new Zn(o,"g");Yn.set(i,{replacement:t,needle:n})},"strip-fetch-query-parameter":function(e,t=null){const n=Ae("strip-fetch-query-parameter");nr||(nr=new Map,window.fetch=l(or,((...e)=>{let[t]=e;if("string"==typeof t){let r=new rr(t);for(let[o,i]of nr)i&&!i.test(t)||sr(r.searchParams,o)&&(n("success",`${o} has been stripped from url ${t}`),ir(r.searchParams,o),e[0]=r.href)}return o(or,self,e)}))),nr.set(e,t&&Ie(t))},trace:function(...e){o(Re,null,e)}};let{MutationObserver:ar,WeakSet:lr,getComputedStyle:ur}=Oe(window);let{clearTimeout:dr,fetch:fr,getComputedStyle:pr,setTimeout:hr,Map:gr,MutationObserver:wr,Uint8Array:mr}=Oe(window);let yr=new gr;function br(e,{as:t="arrayBuffer",cleanup:n=6e4}={}){let r=t+":"+e,o=yr.get(r)||{remove:()=>yr.delete(r),result:null,timer:0};return dr(o.timer),o.timer=hr(o.remove,n),o.result||(o.result=fr(e).then((e=>e[t]())).catch(o.remove),yr.set(r,o)),o.result}const{parseFloat:vr,Math:Er,MutationObserver:xr,WeakSet:Sr}=Oe(window),{min:Mr}=Er,kr=(e,t)=>{const n=e.length+1,r=t.length+1,o=[[0]];let i=0,s=0;for(;++i<r;)o[0][i]=i;for(i=0;++i<n;){const n=e[s];let c=0,a=0;for(o[i]=[i];++c<r;)o[i][c]=Mr(o[s][c]+1,o[i][a]+1,o[s][a]+(n!=t[a])),++a;++s}return o[n-1][r-1]};let{getComputedStyle:Tr,Map:Cr,WeakSet:Or,parseFloat:Lr}=Oe(window);const{ELEMENT_NODE:$r,TEXT_NODE:Pr}=Node;let{MutationObserver:Nr,WeakSet:Wr,getComputedStyle:jr}=Oe(window);let{getComputedStyle:Dr,MutationObserver:Rr,WeakSet:Ar}=Oe(window);Oe(window);const Hr={mark(){},end(){},toString:()=>"{mark(){},end(){}}"};function zr(e,t=10){return Hr}let{MutationObserver:Ir,WeakSet:Br}=Oe(window);const{ELEMENT_NODE:Vr}=Node;let{MutationObserver:Fr,WeakSet:qr}=Oe(window);const{ELEMENT_NODE:Ur}=Node;let{parseInt:Xr,setTimeout:Gr,Error:Jr,MouseEvent:_r,MutationObserver:Kr,WeakSet:Qr}=Oe(window);const Yr=["auxclick","click","dblclick","gotpointercapture","lostpointercapture","mouseenter","mousedown","mouseleave","mousemove","mouseout","mouseover","mouseup","pointerdown","pointerenter","pointermove","pointerover","pointerout","pointerup","pointercancel","pointerleave"];let{isNaN:Zr,MutationObserver:eo,parseInt:to,parseFloat:no,setTimeout:ro}=Oe(window);const oo={...cr,...{log:Re,race:function(e,t="1"){switch(e){case"start":dn={winners:un(t,10)||1,participants:new ln},fn=new cn;break;case"end":case"finish":case"stop":dn=null;for(let e of fn)e();fn=null;break;default:throw new an(`Invalid action: ${e}`)}},debug:We,"hide-if-matches-xpath":function(e,t){const{mark:n,end:r}=zr(),o=Ae("hide-if-matches-xpath"),i=t=>{const i=Vt(`xpath(${e})`),s=new Br,c=()=>{n(),i((t=>{if(s.has(t))return!1;s.add(t),l(),Oe(t).nodeType===Vr?Bt(t):Oe(t).textContent="",o("success","Matched: ",t," for selector: ",e)})),r()},a=new Ir(c),l=pn("hide-if-matches-xpath",(()=>a.disconnect()));a.observe(t,{characterData:!0,childList:!0,subtree:!0}),c()};if(t){let e,n=0;const r=Vt(`xpath(${t})`),o=()=>{r((e=>{i(e),n++})),n>0&&e.disconnect()};e=new Ir(o),e.observe(document,{characterData:!0,childList:!0,subtree:!0}),o()}else i(document)},"hide-if-matches-computed-xpath":function(e,t,n,r){const{mark:o,end:i}=zr(),s=Ae("hide-if-matches-computed-xpath");if(!t||!e)return void s("error","No query or searchQuery provided.");const c=t=>{const n=(t=>e.replace("{{}}",t))(t);s("info","Starting hiding elements that match query: ",n);const r=Vt(`xpath(${n})`),c=new qr,a=()=>{o(),r((t=>{if(c.has(t))return!1;c.add(t),u(),Oe(t).nodeType===Ur?Bt(t):Oe(t).textContent="",s("success","Matched: ",t," for selector: ",e)})),i()},l=new Fr(a),u=pn("hide-if-matches-computed-xpath",(()=>l.disconnect()));l.observe(document,{characterData:!0,childList:!0,subtree:!0}),a()},a=Ie(n);ut(s,(()=>{if(t){s("info","Started searching for: ",t);const e=new qr;let n;const r=Vt(`xpath(${t})`),o=()=>{r((t=>{if(e.has(t))return!1;if(e.add(t),s("info","Found node: ",t),t.innerHTML){s("info","Searching in: ",t.innerHTML);const e=t.innerHTML.match(a);if(e&&e.length){let t="";t=e[1]?e[1]:e[0],s("info","Matched search query: ",t),c(t)}}}))};n=new Fr(o),n.observe(document,{characterData:!0,childList:!0,subtree:!0}),o()}}),r)},"hide-if-contains":function(e,t="*",n=null){const r=Ae("hide-if-contains");let o=Ie(e);const i=qt((e=>o.test(Oe(e).textContent)),t,n,(e=>{r("success","Matched: ",e," for selector: ",t,n)}));i.race(pn("hide-if-contains",(()=>{i.disconnect()})))},"hide-if-contains-similar-text":function(e,t,n=null,r=0,o=0){const i=new Sr,s=Ae("hide-if-contains-similar-text"),c=Oe(e),{length:a}=c,l=a+vr(r)||0,u=Oe([...c]).sort(),d=vr(o)||1/0;null==n&&(n=t),s("Looking for similar text: "+c);const f=()=>{for(const{element:e,rootParents:o}of Nt(n,!0)){if(i.has(e))continue;i.add(e);const{innerText:n}=Oe(e),a=Mr(d,n.length-l+1);for(let i=0;i<a;i++){const a=Oe(n).substr(i,l);if(kr(u,Oe([...a]).sort())-r<=0){const n=Rt(Oe(e),t,o);if(s("success","Found similar text: "+c,n),n){h(),Bt(n);break}}}}};let p=new xr(f),h=pn("hide-if-contains-similar-text",(()=>p.disconnect()));p.observe(document,{childList:!0,characterData:!0,subtree:!0}),f()},"hide-if-contains-visible-text":function(e,t,n=null,...r){let o=Oe([]);const i=new Cr([["-snippet-box-margin","2"],["-disable-bg-color-check","false"],["-check-is-contained","false"]]);for(let e of r){e=Oe(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim().toString(),r=e.slice(t+1).trim().toString();n&&r&&(i.has(n)?i.set(n,r):o.push([n,r]))}let s=Oe([["opacity","0"],["font-size","0px"],["color","rgba(0, 0, 0, 0)"]]),c=new Cr(s.concat(o));function a(e,t,{bgColorCheck:n=!0}={}){t||(t=Tr(e)),t=Oe(t);for(const[e,n]of c){if(Ie(n).test(t.getPropertyValue(e)))return!1}let r=t.getPropertyValue("color");return!n||t.getPropertyValue("background-color")!=r}function l(e,t,{bgColorCheck:n=!0}={}){let r=Tr(e,t);if(!Ut(e,r)||!a(e,r,{bgColorCheck:n}))return"";let{content:o}=Oe(r);if(o&&"none"!==o){let t=Oe([]);return o=Oe(o).trim().replace(/(["'])(?:(?=(\\?))\2.)*?\1/g,(e=>""+(t.push(Oe(e).slice(1,-1))-1))),o=o.replace(/\s*attr\(\s*([^\s,)]+)[^)]*?\)\s*/g,((t,n)=>Oe(e).getAttribute(n)||"")),o.replace(/\x01(\d+)/g,((e,n)=>t[n]))}return""}function u(e,t,{boxMargin:n=2}={}){const r=Oe(e).getBoundingClientRect(),o=Oe(t).getBoundingClientRect(),i=o.left-n,s=o.right+n,c=o.top-n,a=o.bottom+n;return i<=r.left&&r.left<=s&&c<=r.top&&r.top<=a&&c<=r.bottom&&r.bottom<=a&&i<=r.right&&r.right<=s}function d(e,t,n,r,o,i,{boxMargin:s=2,bgColorCheck:c,checkIsContained:f}={}){let p=!n;if(p&&(n=Tr(e)),!Ut(e,n,p&&t,i))return"";r||"hidden"!==Oe(n).getPropertyValue("overflow-x")&&"hidden"!==Oe(n).getPropertyValue("overflow-y")||(r=e);let h=l(e,":before",{bgColorCheck:c});for(let t of function(e,t=!0){const n=Pt(e,t);return n?n.childNodes:Oe(e).childNodes}(Oe(e)))switch(Oe(t).nodeType){case $r:h+=d(t,e,Tr(t),r,o,i,{boxMargin:s,bgColorCheck:c,checkIsContained:f});break;case Pr:if(r)u(e,r,{boxMargin:s})&&a(e,n,{bgColorCheck:c})&&(h+=Oe(t).nodeValue);else if(a(e,n,{bgColorCheck:c})){if(f&&!u(e,o,{boxMargin:s}))continue;h+=Oe(t).nodeValue}}return h+l(e,":after",{bgColorCheck:c})}const f=i.get("-snippet-box-margin"),p=Lr(f)||0,h=!("true"===i.get("-disable-bg-color-check")),g="true"===i.get("-check-is-contained");let w=Ie(e),m=new Or;const y=qt(((e,t,n)=>{if(m.has(e))return!1;m.add(e);let r=d(e,t,null,null,e,n,{boxMargin:p,bgColorCheck:h,checkIsContained:g}),o=w.test(r);return Ne()&&r.length&&Re(o?"success":"info",o,w,r),o}),t,n);y.race(pn("hide-if-contains-visible-text",(()=>{y.disconnect()})))},"hide-if-contains-and-matches-style":function(e,t="*",n=null,r=null,o=null,i,s=null,c=null){const a=Ae("hide-if-contains-and-matches-style"),l=new lr,u=Ne()&&new lr;null==n&&(n=t);const d=Ie(e),f=r?Ie(r):null,p=o?Ie(o):null;ut(a,(()=>{const e=()=>{if(!(s&&window.innerWidth<s||c&&window.innerWidth>c))for(const{element:e,rootParents:r}of Nt(n,!0))if(!l.has(e)&&d.test(Oe(e).textContent))if(!p||p.test(Xt(e))){const n=Rt(Oe(e),t,r);if(!n)continue;if(!f||f.test(Xt(n)))o(),Bt(n),l.add(e),a("success","Matched: ",n,"which contains: ",e," for params: ",...arguments);else{if(!u||u.has(n))continue;a("info","In this element the searchStyle matched but style didn't:\n",n,ur(n),...arguments),u.add(n)}}else{if(!u||u.has(e))continue;a("info","In this element the searchStyle didn't match:\n",e,ur(e),...arguments),u.add(e)}},r=new ar(e),o=pn("hide-if-contains-and-matches-style",(()=>r.disconnect()));r.observe(document,{childList:!0,characterData:!0,subtree:!0}),e()}),i)},"hide-if-has-and-matches-style":function(e,t="*",n=null,r=null,o=null,i=null,s=null,c=null){const a=Ae("hide-if-has-and-matches-style"),l=new Wr,u=Ne()&&new Wr;null==n&&(n=t);const d=r?Ie(r):null,f=o?Ie(o):null;ut(a,(()=>{const r=()=>{if(!(s&&window.innerWidth<s||c&&window.innerWidth>c))for(const{element:r,rootParents:o}of Nt(n,!0))if(!l.has(r))if(!Oe(r).querySelector(e)||f&&!f.test(Xt(r))){if(!u||u.has(r))continue;a("info","In this element the searchStyle didn't match:\n",r,jr(r),...arguments),u.add(r)}else{const e=Rt(Oe(r),t,o);if(!e||d&&!d.test(Xt(e))){if(!u||u.has(e))continue;a("info","In this element the searchStyle matchedbut style didn't:\n",e,jr(e),...arguments),u.add(e)}else i(),Bt(e),l.add(r),a("success","Matched: ",e,"which contains: ",r," for params: ",...arguments)}},o=new Nr(r),i=pn("hide-if-has-and-matches-style",(()=>o.disconnect()));o.observe(document,{childList:!0,subtree:!0}),r()}),i)},"hide-if-labelled-by":function(e,t,n=null){let r=null==n,o=Ie(e),i=new Ar,s=()=>{for(const{element:e,rootParents:s}of Nt(t,!0)){let t=r?e:Rt(Oe(e),n,s);if(!t||!Ut(e,Dr(e),t))continue;let c=Oe(e).getAttribute("aria-labelledby"),l=()=>{i.has(t)||o.test(Oe(e).getAttribute("aria-label")||"")&&(a(),i.add(t),Bt(t))};if(c)for(let e of Oe(c).split(/\s+/)){let n=Oe(document).getElementById(e);n?!i.has(n)&&o.test(n.innerText)&&(a(),i.add(n),Bt(t)):l()}else l()}},c=new Rr(s),a=pn("hide-if-labelled-by",(()=>c.disconnect()));c.observe(document,{characterData:!0,childList:!0,subtree:!0}),s()},"hide-if-contains-image":function(e,t,n){null==n&&(n=t);let r=Ie(e);const o=Ae("hide-if-contains-image");let i=()=>{for(const{element:e,rootParents:i}of Nt(n,!0)){let n=pr(e),s=Oe(n["background-image"]).match(/^url\("(.*)"\)$/);s&&br(s[1]).then((n=>{if(r.test(new mr(n).reduce(((e,t)=>e+function(e,t=2){let n=Oe(e).toString(16);n.length<t&&(n=Oe("0").repeat(t-n.length)+n);return n}(t)),""))){let n=Rt(Oe(e),t,i);n&&(c(),Bt(n),o("success","Matched: ",n," for:",...arguments))}}))}},s=new wr(i),c=pn("hide-if-contains-image",(()=>s.disconnect()));s.observe(document,{childList:!0,subtree:!0}),i()},"simulate-mouse-event":function(...e){const t=Ae("simulate-mouse-event");if(e.length<1)throw new Jr("[simulate-mouse-event snippet]: No selector provided.");e.length>7&&(e=e.slice(0,7));const n=Oe([]);function r(e,n,r){e&&n&&("click"===n&&e.click?(e.click(),t("success","Clicked on this node:\n",e,"\nwith a delay of",r,"ms")):(e.dispatchEvent(new _r(n,{bubbles:!0,cancelable:!0})),t("success","A",n,"event was dispatched with a delay of",r,"ms on this node:\n",e)))}Oe(e).forEach((e=>{const r=function(e){if(!e)return null;const n={selector:"",continue:!1,trigger:!1,event:"click",delay:"500",clicked:!1,found:!1},r=e.split("$");let o=[];r.length>=2&&(o=r[1].toLowerCase().split(",")),[n.selector]=r;for(const e of o)if("trigger"===e)n.trigger=!0;else if("continue"===e)n.continue=!0;else if(e.startsWith("event")){const t=e.toLowerCase().split("=");t[1]?n.event=t[1]:n.event="click"}else if(e.startsWith("delay")){const t=e.toLowerCase().split("=");t[1]?n.delay=t[1]:n.delay="500"}return Yr.includes(n.event)||t("warn",n.event," might be misspelled, check for typos.\n","These are the supported events:",Yr),n}(e);n.push(r)}));let o=!1;const[i]=n.slice(-1);i.trigger=!0;let s=new Qr;function c(){if(o||(n.forEach((e=>{e.found||Ft(e.selector)().length>0&&(e.found=!0)})),o=n.every((e=>e.found))),o)for(const e of n){const t=Vt(e.selector),n=Xr(e.delay,10);e.trigger&&t((t=>{s.has(t)||(s.add(t),e.continue?setInterval((()=>{r(t,e.event,e.delay)}),n):Gr((()=>{r(t,e.event,e.delay)}),n))}))}}new Kr(c).observe(document,{childList:!0,subtree:!0}),c()},"skip-video":function(e,t,...n){const r=new Map([["-max-attempts","10"],["-retry-ms","10"],["-run-once","false"],["-wait-until",""],["-skip-to","-0.1"],["-stop-on-video-end","false"],["-start-from","0"],["-mute-video-when-skipping","true"]]);for(let e of n){e=Oe(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim().toString(),o=e.slice(t+1).trim().toString();n&&o&&r.has(n)&&r.set(n,o)}const o=r.get("-max-attempts"),i=to(o||10,10),s=r.get("-retry-ms"),c=to(s||10,10),a="true"===r.get("-run-once"),l=r.get("-skip-to"),u=no(l||-.1),d=r.get("-start-from"),f=to(d||0,10),p=r.get("-wait-until"),h="true"===r.get("-stop-on-video-end"),g=!("false"===r.get("-mute-video-when-skipping")),w=Ae("skip-video"),m=Vt(`xpath(${t})`);let y=!1;ut(w,(()=>{const n=(s=0)=>{y&&a?r&&r.disconnect():m((r=>{w("info","Matched: ",r," for selector: ",t),w("info","Running video skipping logic.");const a=Nt(e)[0];for(;Zr(a.duration)&&s<i;)return void ro((()=>{const e=s+1;w("info","Running video skipping logic. Attempt: ",e),n(e)}),c);const l=a.duration-a.currentTime<.5;!(!Zr(a.duration)&&a.duration>0&&a.currentTime<a.duration)||h&&l||(g&&(a.muted=!0,w("success","Muted video...")),f<=1e3*a.currentTime&&(u<=0?a.currentTime=a.duration+u:a.currentTime+=u,w("success","Skipped duration..."),a.paused&&a.play(),y=!0,o()))}))},r=new eo(n),o=pn("skip-video",(()=>r.disconnect()));r.observe(document,{characterData:!0,childList:!0,subtree:!0}),n()}),p)}}};
const snippets=oo;
let context;
for (const [name, ...args] of filters) {
if (snippets.hasOwnProperty(name)) {
try { context = snippets[name].apply(context, args); }
catch (error) { console.error(error); }
}
}
context = void 0;
}