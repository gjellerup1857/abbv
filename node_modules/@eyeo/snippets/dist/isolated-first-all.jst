(e, ...t) => {
/*!
 * This file is part of eyeo's Anti-Circumvention Snippets module (@eyeo/snippets),
 * Copyright (C) 2006-present eyeo GmbH
 * 
 * @eyeo/snippets is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 * 
 * @eyeo/snippets is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with @eyeo/snippets.  If not, see <http://www.gnu.org/licenses/>.
 */
  ((environment, ...filters) => {
const e=Proxy,{apply:t,bind:n,call:o}=Function,r=o.bind(t),i=o.bind(n),s=o.bind(o),c={get:(e,t)=>i(o,e[t])},l=t=>new e(t,c),a={get:(e,t)=>i(e[t],e)},u=t=>new e(t,a),{assign:d,defineProperties:f,freeze:h,getOwnPropertyDescriptor:p,getOwnPropertyDescriptors:g,getPrototypeOf:m}=u(Object),{hasOwnProperty:w}=l({}),{species:b}=Symbol,y={get(e,t){const n=e[t];class o extends n{}const r=g(n.prototype);delete r.constructor,h(f(o.prototype,r));const i=g(n);return delete i.length,delete i.prototype,i[b]={value:o},h(f(o,i))}},v=t=>new e(t,y),S="undefined"!=typeof environment?environment:{};"undefined"==typeof globalThis&&(window.globalThis=window);const{apply:x,ownKeys:k}=u(Reflect),E="world"in S,C=E&&"ISOLATED"===S.world,M=E&&"MAIN"===S.world,T="object"==typeof chrome&&!!chrome.runtime,P="object"==typeof browser&&!!browser.runtime,O=!M&&(C||T||P),W=e=>O?e:L(e,R(e)),{create:L,defineProperties:N,defineProperty:$,freeze:D,getOwnPropertyDescriptor:A,getOwnPropertyDescriptors:R}=u(Object),I=u(globalThis),j=O?globalThis:v(globalThis),{Map:H,RegExp:V,Set:_,WeakMap:q,WeakSet:B}=j,F=(e,t,n=null)=>{const o=k(t);for(const r of k(e)){if(o.includes(r))continue;const i=A(e,r);if(n&&"value"in i){const{value:e}=i;"function"==typeof e&&(i.value=n(e))}$(t,r,i)}},X=e=>{const t=j[e];class n extends t{}const{toString:o,valueOf:r}=t.prototype;N(n.prototype,{toString:{value:o},valueOf:{value:r}});const i=e.toLowerCase(),s=e=>function(){const t=x(e,this,arguments);return typeof t===i?new n(t):t};return F(t,n,s),F(t.prototype,n.prototype,s),n},z=D({frozen:new q,hidden:new B,iframePropertiesToAbort:{read:new _,write:new _},abortedIframes:new q}),G=new V("^[A-Z]");var U=new Proxy(new H([["chrome",O&&(T&&chrome||P&&browser)||void 0],["isExtensionContext",O],["variables",z],["console",W(console)],["document",globalThis.document],["performance",W(performance)],["JSON",W(JSON)],["Map",H],["Math",W(Math)],["Number",O?Number:X("Number")],["RegExp",V],["Set",_],["String",O?String:X("String")],["WeakMap",q],["WeakSet",B],["MouseEvent",MouseEvent]]),{get(e,t){if(e.has(t))return e.get(t);let n=globalThis[t];return"function"==typeof n&&(n=(G.test(t)?j:I)[t]),e.set(t,n),n},has:(e,t)=>e.has(t)});const J={WeakSet:WeakSet,WeakMap:WeakMap,WeakValue:class{has(){return!1}set(){}}},{apply:Q}=Reflect;const{Map:Y,WeakMap:K,WeakSet:Z,setTimeout:ee}=U;let te=!0,ne=e=>{e.clear(),te=!te};var oe=function(e){const{WeakSet:t,WeakMap:n,WeakValue:o}=this||J,r=new t,i=new n,s=new o;return function(t){if(r.has(t))return t;if(i.has(t))return i.get(t);if(s.has(t))return s.get(t);const n=Q(e,this,arguments);return r.add(n),n!==t&&("object"==typeof t&&t?i:s).set(t,n),n}}.bind({WeakMap:K,WeakSet:Z,WeakValue:class extends Y{set(e,t){return te&&(te=!te,ee(ne,0,this)),super.set(e,t)}}});const{concat:re,includes:ie,join:se,reduce:ce,unshift:le}=l([]),ae=v(globalThis),{Map:ue,WeakMap:de}=ae,fe=new ue,he=t=>{const n=(e=>{const t=[];let n=e;for(;n;){if(fe.has(n))le(t,fe.get(n));else{const e=g(n);fe.set(n,e),le(t,e)}n=m(n)}return le(t,{}),r(d,null,t)})("function"==typeof t?t.prototype:t),o={get(e,t){if(t in n){const{value:o,get:r}=n[t];if(r)return s(r,e);if("function"==typeof o)return i(o,e)}return e[t]},set(e,t,o){if(t in n){const{set:r}=n[t];if(r)return s(r,e,o),!0}return e[t]=o,!0}};return t=>new e(t,o)},{isExtensionContext:pe,Array:ge,Number:me,String:we,Object:be}=U,{isArray:ye}=ge,{getOwnPropertyDescriptor:ve,setPrototypeOf:Se}=be,{toString:xe}=be.prototype,{slice:ke}=we.prototype,{get:Ee}=ve(Node.prototype,"nodeType"),Ce=pe?{}:{Attr:he(Attr),CanvasRenderingContext2D:he(CanvasRenderingContext2D),CSSStyleDeclaration:he(CSSStyleDeclaration),Document:he(Document),Element:he(Element),HTMLCanvasElement:he(HTMLCanvasElement),HTMLElement:he(HTMLElement),HTMLImageElement:he(HTMLImageElement),HTMLScriptElement:he(HTMLScriptElement),MutationRecord:he(MutationRecord),Node:he(Node),ShadowRoot:he(ShadowRoot),get CSS2Properties(){return Ce.CSSStyleDeclaration}},Me=(e,t)=>{if("Element"!==t&&t in Ce)return Ce[t](e);if(ye(e))return Se(e,ge.prototype);const n=(e=>s(ke,s(xe,e),8,-1))(e);if(n in Ce)return Ce[n](e);if(n in U)return Se(e,U[n].prototype);if("nodeType"in e)switch(s(Ee,e)){case 1:if(!(t in Ce))throw new Error("unknown hint "+t);return Ce[t](e);case 2:return Ce.Attr(e);case 3:return Ce.Node(e);case 9:return Ce.Document(e)}throw new Error("unknown brand "+n)};var Te=pe?e=>e===window||e===globalThis?U:e:oe(((e,t="Element")=>{if(e===window||e===globalThis)return U;switch(typeof e){case"object":return e&&Me(e,t);case"string":return new we(e);case"number":return new me(e);default:throw new Error("unsupported value")}}));let Pe=!1;function Oe(){return Pe}let{console:We,document:Le,getComputedStyle:Ne,isExtensionContext:$e,variables:De,Array:Ae,MutationObserver:Re,Object:Ie,XPathEvaluator:je,XPathExpression:He,XPathResult:Ve}=Te(window);const{querySelectorAll:_e}=Le,qe=_e&&i(_e,Le);function Be(e,t=!1){try{const n=navigator.userAgent.includes("Firefox")?e.openOrClosedShadowRoot:browser.dom.openOrClosedShadowRoot(e);return null===n&&Oe()&&!t&&We.log("Shadow root not found or not added in element yet",e),n}catch(n){return Oe()&&!t&&We.log("Error while accessing shadow root",e,n),null}}function Fe(e,t=!1){return Ge(e,qe.bind(Le),Le,t)}function Xe(e,t,n,o){const r=t.getAttribute("xlink:href")||t.getAttribute("href");if(r){const s=qe(r)[0];if(!s&&Oe())return We.log("No elements found matching",r),!1;if(!(i=e)||0===i.length||i.every((e=>""===e.trim()))){const e=o.length>0?o:[];return n.push({element:s,rootParents:[...e,t]}),!1}const c=s.querySelectorAll.bind(s);return{nextBoundElement:s,nestedSelectorsString:e.join("^^"),next$$:c}}var i}function ze(e,t){const n=Be(t);if(n){const{querySelectorAll:o}=n,r=o&&i(o,n).bind(n);return{nextBoundElement:t,nestedSelectorsString:":host "+e.join("^^"),next$$:r}}return!1}function Ge(e,t,n,o,r=[]){if(e.includes("^^")){const[i,s,...c]=e.split("^^");let l,a;switch(s){case"svg":a=Xe;break;case"sh":a=ze;break;default:return Oe()&&We.log(s," is not supported. Supported commands are: \n^^sh^^\n^^svg^^"),[]}l=""===i.trim()?[n]:t(i);const u=[];for(const e of l){const t=a(c,e,u,r);if(!t)continue;const{next$$:n,nestedSelectorsString:i,nextBoundElement:s}=t,l=Ge(i,n,s,o,[...r,e]);l&&u.push(...l)}return u}const i=t(e);return o?[...i].map((e=>({element:e,rootParents:r.length>0?r:[]}))):i}function Ue(e,t,n=[]){if(t.includes("^^svg^^")&&(t=t.split("^^svg^^")[0]),t.includes("^^sh^^")){const o=t.split("^^sh^^"),r=o.length-1;if(t=`:host ${o[r]}`,r===n.length)return e.closest(t);return n[r].closest(t)}return n[0]?n[0].closest(t):e.closest(t)}const{assign:Je,setPrototypeOf:Qe}=Ie;class Ye extends He{evaluate(...e){return Qe(r(super.evaluate,this,e),Ve.prototype)}}class Ke extends je{createExpression(...e){return Qe(r(super.createExpression,this,e),Ye.prototype)}}function Ze(e){if(De.hidden.has(e))return!1;!function(e){$e&&"function"==typeof checkElement&&checkElement(e)}(e),De.hidden.add(e);let{style:t}=Te(e),n=Te(t,"CSSStyleDeclaration"),o=Te([]),{debugCSSProperties:r}=S;for(let[e,t]of r||[["display","none"]])n.setProperty(e,t,"important"),o.push([e,n.getPropertyValue(e)]);return new Re((()=>{for(let[e,t]of o){let o=n.getPropertyValue(e),r=n.getPropertyPriority(e);o==t&&"important"==r||n.setProperty(e,t,"important")}})).observe(e,{attributes:!0,attributeFilter:["style"]}),!0}function et(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let e=t.slice(6,-1),n=(new Ke).createExpression(e,null),o=Ve.ORDERED_NODE_SNAPSHOT_TYPE;return e=>{if(!e)return;let t=n.evaluate(Le,o,null),{snapshotLength:r}=t;for(let n=0;n<r;n++)e(t.snapshotItem(n))}}return t=>Fe(e).forEach(t)}function tt(e,t,n,o){let r;null==n&&(n=t);const i=()=>{for(const{element:i,rootParents:s}of Fe(n,!0)){const n=Ue(Te(i),t,s);n&&e(i,n,s)&&(r(),Ze(n)&&"function"==typeof o&&o(n))}};return Je(new Re(i),{race(e){r=e,this.observe(Le,{childList:!0,characterData:!0,subtree:!0}),i()}})}function nt(e,t,n,o){let r=Te(t,"CSSStyleDeclaration");if("none"==r.getPropertyValue("display"))return!1;let i=r.getPropertyValue("visibility");if("hidden"==i||"collapse"==i)return!1;if(!n||e==n)return!0;let s=Te(e).parentElement;if(!s){if(!o||!o.length)return!0;s=o[o.length-1],o=o.slice(0,-1)}return nt(s,Ne(s),n,o)}function ot(e){let t=Ne(e),{cssText:n}=t;if(n)return n;for(let e of t)n+=`${e}: ${t[e]}; `;return Te(n).trim()}let{Math:rt,RegExp:it}=Te(window);function st(e){let{length:t}=e;if(t>1&&"/"===e[0]){let n="/"===e[t-1];if(n||t>2&&Te(e).endsWith("/i")){let t=[Te(e).slice(1,n?-1:-2)];return n||t.push("i"),new it(...t)}}return new it(Te(e).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))}const{console:ct}=Te(window),lt=()=>{};function at(...e){if(Oe()){const t=["%c DEBUG","font-weight: bold;"],n=e.indexOf("error"),o=e.indexOf("warn"),r=e.indexOf("success"),i=e.indexOf("info");-1!==n?(t[0]+=" - ERROR",t[1]+="color: red; border:2px solid red",Te(e).splice(n,1)):-1!==o?(t[0]+=" - WARNING",t[1]+="color: orange; border:2px solid orange ",Te(e).splice(o,1)):-1!==r?(t[0]+=" - SUCCESS",t[1]+="color: green; border:2px solid green",Te(e).splice(r,1)):-1!==i&&(t[1]+="color: black;",Te(e).splice(i,1)),Te(e).unshift(...t)}ct.log(...e)}function ut(e){return i(Oe()?at:lt,null,e)}let{Array:dt,Error:ft,Map:ht,parseInt:pt}=Te(window),gt=null,mt=null;function wt(e,t){if(null===gt)return lt;let n=gt,{participants:o}=n;return o.set(r,t),r;function r(){if(n.winners<1)return;if(ut("race")("success",`${e} won the race`),n===gt)mt.push(r);else if(o.delete(r),--n.winners<1){for(let e of o.values())e();o.clear()}}}const bt={get(e,t){const n=e;for(;!w(e,t);)e=m(e);const{get:o,set:i}=p(e,t);return function(){return arguments.length?r(i,n,arguments):s(o,n)}}};var yt;function vt(e,t,n){var o,r;n?"load"===n?(e("info","Waiting until window.load"),window.addEventListener("load",(()=>{e("info","Window.load fired."),t()}))):"loading"===n||"interactive"===n||"complete"===n?(e("info","Waiting document state until :",n),document.addEventListener("readystatechange",(()=>{e("info","Document state changed:",document.readyState),document.readyState===n&&t()}))):(e("info","Waiting until ",n," event is triggered on document"),(o=document,r=n,new Promise((e=>{const t=()=>{o.removeEventListener(r,t),e()};o.addEventListener(r,t)}))).then((()=>{e("info",n," is triggered on document, starting the snippet"),t()})).catch((t=>{e("error","There was an error while waiting for the event.",t)}))):t()}Te(window),yt=window,new e(yt,bt),Te(/^\d+$/);let{MutationObserver:St,WeakSet:xt,getComputedStyle:kt}=Te(window);let{clearTimeout:Et,fetch:Ct,getComputedStyle:Mt,setTimeout:Tt,Map:Pt,MutationObserver:Ot,Uint8Array:Wt}=Te(window);let Lt=new Pt;function Nt(e,{as:t="arrayBuffer",cleanup:n=6e4}={}){let o=t+":"+e,r=Lt.get(o)||{remove:()=>Lt.delete(o),result:null,timer:0};return Et(r.timer),r.timer=Tt(r.remove,n),r.result||(r.result=Ct(e).then((e=>e[t]())).catch(r.remove),Lt.set(o,r)),r.result}const{parseFloat:$t,Math:Dt,MutationObserver:At,WeakSet:Rt}=Te(window),{min:It}=Dt,jt=(e,t)=>{const n=e.length+1,o=t.length+1,r=[[0]];let i=0,s=0;for(;++i<o;)r[0][i]=i;for(i=0;++i<n;){const n=e[s];let c=0,l=0;for(r[i]=[i];++c<o;)r[i][c]=It(r[s][c]+1,r[i][l]+1,r[s][l]+(n!=t[l])),++l;++s}return r[n-1][o-1]};let{getComputedStyle:Ht,Map:Vt,WeakSet:_t,parseFloat:qt}=Te(window);const{ELEMENT_NODE:Bt,TEXT_NODE:Ft}=Node;let{MutationObserver:Xt,WeakSet:zt,getComputedStyle:Gt}=Te(window);let{getComputedStyle:Ut,MutationObserver:Jt,WeakSet:Qt}=Te(window);Te(window);const Yt={mark(){},end(){},toString:()=>"{mark(){},end(){}}"};function Kt(e,t=10){return Yt}let{MutationObserver:Zt,WeakSet:en}=Te(window);const{ELEMENT_NODE:tn}=Node;let{MutationObserver:nn,WeakSet:on}=Te(window);const{ELEMENT_NODE:rn}=Node;let{parseInt:sn,setTimeout:cn,Error:ln,MouseEvent:an,MutationObserver:un,WeakSet:dn}=Te(window);const fn=["auxclick","click","dblclick","gotpointercapture","lostpointercapture","mouseenter","mousedown","mouseleave","mousemove","mouseout","mouseover","mouseup","pointerdown","pointerenter","pointermove","pointerover","pointerout","pointerup","pointercancel","pointerleave"];let{isNaN:hn,MutationObserver:pn,parseInt:gn,parseFloat:mn,setTimeout:wn}=Te(window);const bn={log:at,race:function(e,t="1"){switch(e){case"start":gt={winners:pt(t,10)||1,participants:new ht},mt=new dt;break;case"end":case"finish":case"stop":gt=null;for(let e of mt)e();mt=null;break;default:throw new ft(`Invalid action: ${e}`)}},debug:function(){Pe=!0},"hide-if-matches-xpath":function(e,t){const{mark:n,end:o}=Kt(),r=ut("hide-if-matches-xpath"),i=t=>{const i=et(`xpath(${e})`),s=new en,c=()=>{n(),i((t=>{if(s.has(t))return!1;s.add(t),a(),Te(t).nodeType===tn?Ze(t):Te(t).textContent="",r("success","Matched: ",t," for selector: ",e)})),o()},l=new Zt(c),a=wt("hide-if-matches-xpath",(()=>l.disconnect()));l.observe(t,{characterData:!0,childList:!0,subtree:!0}),c()};if(t){let e,n=0;const o=et(`xpath(${t})`),r=()=>{o((e=>{i(e),n++})),n>0&&e.disconnect()};e=new Zt(r),e.observe(document,{characterData:!0,childList:!0,subtree:!0}),r()}else i(document)},"hide-if-matches-computed-xpath":function(e,t,n,o){const{mark:r,end:i}=Kt(),s=ut("hide-if-matches-computed-xpath");if(!t||!e)return void s("error","No query or searchQuery provided.");const c=t=>{const n=(t=>e.replace("{{}}",t))(t);s("info","Starting hiding elements that match query: ",n);const o=et(`xpath(${n})`),c=new on,l=()=>{r(),o((t=>{if(c.has(t))return!1;c.add(t),u(),Te(t).nodeType===rn?Ze(t):Te(t).textContent="",s("success","Matched: ",t," for selector: ",e)})),i()},a=new nn(l),u=wt("hide-if-matches-computed-xpath",(()=>a.disconnect()));a.observe(document,{characterData:!0,childList:!0,subtree:!0}),l()},l=st(n);vt(s,(()=>{if(t){s("info","Started searching for: ",t);const e=new on;let n;const o=et(`xpath(${t})`),r=()=>{o((t=>{if(e.has(t))return!1;if(e.add(t),s("info","Found node: ",t),t.innerHTML){s("info","Searching in: ",t.innerHTML);const e=t.innerHTML.match(l);if(e&&e.length){let t="";t=e[1]?e[1]:e[0],s("info","Matched search query: ",t),c(t)}}}))};n=new nn(r),n.observe(document,{characterData:!0,childList:!0,subtree:!0}),r()}}),o)},"hide-if-contains":function(e,t="*",n=null){const o=ut("hide-if-contains");let r=st(e);const i=tt((e=>r.test(Te(e).textContent)),t,n,(e=>{o("success","Matched: ",e," for selector: ",t,n)}));i.race(wt("hide-if-contains",(()=>{i.disconnect()})))},"hide-if-contains-similar-text":function(e,t,n=null,o=0,r=0){const i=new Rt,s=ut("hide-if-contains-similar-text"),c=Te(e),{length:l}=c,a=l+$t(o)||0,u=Te([...c]).sort(),d=$t(r)||1/0;null==n&&(n=t),s("Looking for similar text: "+c);const f=()=>{for(const{element:e,rootParents:r}of Fe(n,!0)){if(i.has(e))continue;i.add(e);const{innerText:n}=Te(e),l=It(d,n.length-a+1);for(let i=0;i<l;i++){const l=Te(n).substr(i,a);if(jt(u,Te([...l]).sort())-o<=0){const n=Ue(Te(e),t,r);if(s("success","Found similar text: "+c,n),n){p(),Ze(n);break}}}}};let h=new At(f),p=wt("hide-if-contains-similar-text",(()=>h.disconnect()));h.observe(document,{childList:!0,characterData:!0,subtree:!0}),f()},"hide-if-contains-visible-text":function(e,t,n=null,...o){let r=Te([]);const i=new Vt([["-snippet-box-margin","2"],["-disable-bg-color-check","false"],["-check-is-contained","false"]]);for(let e of o){e=Te(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim().toString(),o=e.slice(t+1).trim().toString();n&&o&&(i.has(n)?i.set(n,o):r.push([n,o]))}let s=Te([["opacity","0"],["font-size","0px"],["color","rgba(0, 0, 0, 0)"]]),c=new Vt(s.concat(r));function l(e,t,{bgColorCheck:n=!0}={}){t||(t=Ht(e)),t=Te(t);for(const[e,n]of c){if(st(n).test(t.getPropertyValue(e)))return!1}let o=t.getPropertyValue("color");return!n||t.getPropertyValue("background-color")!=o}function a(e,t,{bgColorCheck:n=!0}={}){let o=Ht(e,t);if(!nt(e,o)||!l(e,o,{bgColorCheck:n}))return"";let{content:r}=Te(o);if(r&&"none"!==r){let t=Te([]);return r=Te(r).trim().replace(/(["'])(?:(?=(\\?))\2.)*?\1/g,(e=>""+(t.push(Te(e).slice(1,-1))-1))),r=r.replace(/\s*attr\(\s*([^\s,)]+)[^)]*?\)\s*/g,((t,n)=>Te(e).getAttribute(n)||"")),r.replace(/\x01(\d+)/g,((e,n)=>t[n]))}return""}function u(e,t,{boxMargin:n=2}={}){const o=Te(e).getBoundingClientRect(),r=Te(t).getBoundingClientRect(),i=r.left-n,s=r.right+n,c=r.top-n,l=r.bottom+n;return i<=o.left&&o.left<=s&&c<=o.top&&o.top<=l&&c<=o.bottom&&o.bottom<=l&&i<=o.right&&o.right<=s}function d(e,t,n,o,r,i,{boxMargin:s=2,bgColorCheck:c,checkIsContained:f}={}){let h=!n;if(h&&(n=Ht(e)),!nt(e,n,h&&t,i))return"";o||"hidden"!==Te(n).getPropertyValue("overflow-x")&&"hidden"!==Te(n).getPropertyValue("overflow-y")||(o=e);let p=a(e,":before",{bgColorCheck:c});for(let t of function(e,t=!0){const n=Be(e,t);return n?n.childNodes:Te(e).childNodes}(Te(e)))switch(Te(t).nodeType){case Bt:p+=d(t,e,Ht(t),o,r,i,{boxMargin:s,bgColorCheck:c,checkIsContained:f});break;case Ft:if(o)u(e,o,{boxMargin:s})&&l(e,n,{bgColorCheck:c})&&(p+=Te(t).nodeValue);else if(l(e,n,{bgColorCheck:c})){if(f&&!u(e,r,{boxMargin:s}))continue;p+=Te(t).nodeValue}}return p+a(e,":after",{bgColorCheck:c})}const f=i.get("-snippet-box-margin"),h=qt(f)||0,p=!("true"===i.get("-disable-bg-color-check")),g="true"===i.get("-check-is-contained");let m=st(e),w=new _t;const b=tt(((e,t,n)=>{if(w.has(e))return!1;w.add(e);let o=d(e,t,null,null,e,n,{boxMargin:h,bgColorCheck:p,checkIsContained:g}),r=m.test(o);return Oe()&&o.length&&at(r?"success":"info",r,m,o),r}),t,n);b.race(wt("hide-if-contains-visible-text",(()=>{b.disconnect()})))},"hide-if-contains-and-matches-style":function(e,t="*",n=null,o=null,r=null,i,s=null,c=null){const l=ut("hide-if-contains-and-matches-style"),a=new xt,u=Oe()&&new xt;null==n&&(n=t);const d=st(e),f=o?st(o):null,h=r?st(r):null;vt(l,(()=>{const e=()=>{if(!(s&&window.innerWidth<s||c&&window.innerWidth>c))for(const{element:e,rootParents:o}of Fe(n,!0))if(!a.has(e)&&d.test(Te(e).textContent))if(!h||h.test(ot(e))){const n=Ue(Te(e),t,o);if(!n)continue;if(!f||f.test(ot(n)))r(),Ze(n),a.add(e),l("success","Matched: ",n,"which contains: ",e," for params: ",...arguments);else{if(!u||u.has(n))continue;l("info","In this element the searchStyle matched but style didn't:\n",n,kt(n),...arguments),u.add(n)}}else{if(!u||u.has(e))continue;l("info","In this element the searchStyle didn't match:\n",e,kt(e),...arguments),u.add(e)}},o=new St(e),r=wt("hide-if-contains-and-matches-style",(()=>o.disconnect()));o.observe(document,{childList:!0,characterData:!0,subtree:!0}),e()}),i)},"hide-if-has-and-matches-style":function(e,t="*",n=null,o=null,r=null,i=null,s=null,c=null){const l=ut("hide-if-has-and-matches-style"),a=new zt,u=Oe()&&new zt;null==n&&(n=t);const d=o?st(o):null,f=r?st(r):null;vt(l,(()=>{const o=()=>{if(!(s&&window.innerWidth<s||c&&window.innerWidth>c))for(const{element:o,rootParents:r}of Fe(n,!0))if(!a.has(o))if(!Te(o).querySelector(e)||f&&!f.test(ot(o))){if(!u||u.has(o))continue;l("info","In this element the searchStyle didn't match:\n",o,Gt(o),...arguments),u.add(o)}else{const e=Ue(Te(o),t,r);if(!e||d&&!d.test(ot(e))){if(!u||u.has(e))continue;l("info","In this element the searchStyle matchedbut style didn't:\n",e,Gt(e),...arguments),u.add(e)}else i(),Ze(e),a.add(o),l("success","Matched: ",e,"which contains: ",o," for params: ",...arguments)}},r=new Xt(o),i=wt("hide-if-has-and-matches-style",(()=>r.disconnect()));r.observe(document,{childList:!0,subtree:!0}),o()}),i)},"hide-if-labelled-by":function(e,t,n=null){let o=null==n,r=st(e),i=new Qt,s=()=>{for(const{element:e,rootParents:s}of Fe(t,!0)){let t=o?e:Ue(Te(e),n,s);if(!t||!nt(e,Ut(e),t))continue;let c=Te(e).getAttribute("aria-labelledby"),a=()=>{i.has(t)||r.test(Te(e).getAttribute("aria-label")||"")&&(l(),i.add(t),Ze(t))};if(c)for(let e of Te(c).split(/\s+/)){let n=Te(document).getElementById(e);n?!i.has(n)&&r.test(n.innerText)&&(l(),i.add(n),Ze(t)):a()}else a()}},c=new Jt(s),l=wt("hide-if-labelled-by",(()=>c.disconnect()));c.observe(document,{characterData:!0,childList:!0,subtree:!0}),s()},"hide-if-contains-image":function(e,t,n){null==n&&(n=t);let o=st(e);const r=ut("hide-if-contains-image");let i=()=>{for(const{element:e,rootParents:i}of Fe(n,!0)){let n=Mt(e),s=Te(n["background-image"]).match(/^url\("(.*)"\)$/);s&&Nt(s[1]).then((n=>{if(o.test(new Wt(n).reduce(((e,t)=>e+function(e,t=2){let n=Te(e).toString(16);n.length<t&&(n=Te("0").repeat(t-n.length)+n);return n}(t)),""))){let n=Ue(Te(e),t,i);n&&(c(),Ze(n),r("success","Matched: ",n," for:",...arguments))}}))}},s=new Ot(i),c=wt("hide-if-contains-image",(()=>s.disconnect()));s.observe(document,{childList:!0,subtree:!0}),i()},"simulate-mouse-event":function(...e){const t=ut("simulate-mouse-event");if(e.length<1)throw new ln("[simulate-mouse-event snippet]: No selector provided.");e.length>7&&(e=e.slice(0,7));const n=Te([]);function o(){return n.forEach((e=>{if(!e.found){(function(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let t=et(e);return()=>{let e=Te([]);return t((t=>e.push(t))),e}}return()=>Ae.from(Fe(e))})(e.selector)().length>0&&(e.found=!0)}})),n.every((e=>e.found))}function r(e,n,o){e&&n&&("click"===n&&e.click?(e.click(),t("success","Clicked on this node:\n",e,"\nwith a delay of",o,"ms")):(e.dispatchEvent(new an(n,{bubbles:!0,cancelable:!0})),t("success","A",n,"event was dispatched with a delay of",o,"ms on this node:\n",e)))}Te(e).forEach((e=>{const o=function(e){if(!e)return null;const n={selector:"",continue:!1,trigger:!1,event:"click",delay:"500",clicked:!1,found:!1},o=e.split("$");let r=[];o.length>=2&&(r=o[1].toLowerCase().split(",")),[n.selector]=o;for(const e of r)if("trigger"===e)n.trigger=!0;else if("continue"===e)n.continue=!0;else if(e.startsWith("event")){const t=e.toLowerCase().split("=");t[1]?n.event=t[1]:n.event="click"}else if(e.startsWith("delay")){const t=e.toLowerCase().split("=");t[1]?n.delay=t[1]:n.delay="500"}return fn.includes(n.event)||t("warn",n.event," might be misspelled, check for typos.\n","These are the supported events:",fn),n}(e);n.push(o)}));let i=!1;const[s]=n.slice(-1);s.trigger=!0;let c=new dn;function l(){if(i||(i=o()),i)for(const e of n){const t=et(e.selector),n=sn(e.delay,10);e.trigger&&t((t=>{c.has(t)||(c.add(t),e.continue?setInterval((()=>{r(t,e.event,e.delay)}),n):cn((()=>{r(t,e.event,e.delay)}),n))}))}}new un(l).observe(document,{childList:!0,subtree:!0}),l()},"skip-video":function(e,t,...n){const o=new Map([["-max-attempts","10"],["-retry-ms","10"],["-run-once","false"],["-wait-until",""],["-skip-to","-0.1"],["-stop-on-video-end","false"],["-start-from","0"],["-mute-video-when-skipping","true"]]);for(let e of n){e=Te(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim().toString(),r=e.slice(t+1).trim().toString();n&&r&&o.has(n)&&o.set(n,r)}const r=o.get("-max-attempts"),i=gn(r||10,10),s=o.get("-retry-ms"),c=gn(s||10,10),l="true"===o.get("-run-once"),a=o.get("-skip-to"),u=mn(a||-.1),d=o.get("-start-from"),f=gn(d||0,10),h=o.get("-wait-until"),p="true"===o.get("-stop-on-video-end"),g=!("false"===o.get("-mute-video-when-skipping")),m=ut("skip-video"),w=et(`xpath(${t})`);let b=!1;vt(m,(()=>{const n=(s=0)=>{b&&l?o&&o.disconnect():w((o=>{m("info","Matched: ",o," for selector: ",t),m("info","Running video skipping logic.");const l=Fe(e)[0];for(;hn(l.duration)&&s<i;)return void wn((()=>{const e=s+1;m("info","Running video skipping logic. Attempt: ",e),n(e)}),c);const a=l.duration-l.currentTime<.5;!(!hn(l.duration)&&l.duration>0&&l.currentTime<l.duration)||p&&a||(g&&(l.muted=!0,m("success","Muted video...")),f<=1e3*l.currentTime&&(u<=0?l.currentTime=l.duration+u:l.currentTime+=u,m("success","Skipped duration..."),l.paused&&l.play(),b=!0,r()))}))},o=new pn(n),r=wt("skip-video",(()=>o.disconnect()));o.observe(document,{characterData:!0,childList:!0,subtree:!0}),n()}),h)}};let{MutationObserver:yn}=Te(window);const{ELEMENT_NODE:vn}=Node;const Sn=500;async function xn(e,t,n=!1){return new Promise(((o,r)=>{if(!e||!t)return r();let i=e.config,s=i.cutoff||e.topology.graphml.nodes||Sn;i=i.filter((e=>e.include));for(let e of i)e.groupName=Object.keys(e)[2];let c=(e,t,n,o)=>{"attributes"===n&&void 0!==e.attributes[o]?t.attributes[o]=e.attributes[o].value:"style"===n&&e.style[o]?t.attributes.style[o]=e.style[o]:"css"===n&&(t.cssSelectors=getComputedStyle(e).cssText||"")},l=e=>{if(n&&!e.clientWidth&&!e.clientHeight)return;if(s-=1,s<0)return;let t={tag:e.tagName,width:e.clientWidth,height:e.clientHeight,attributes:{style:{}},children:[]};for(let n of i)for(let o of n[n.groupName].features)for(let[r,i]of Object.entries(o))if("names"in i)for(let o of i.names)for(let r of o.split("^"))c(e,t,n.groupName,r);else c(e,t,n.groupName,r);if(e.children)for(let n of e.children){let e=l(n);e&&t.children.push(e)}return t};o(l(t))}))}let{WeakSet:kn,MutationObserver:En}=(void 0!==Te?Te:e=>e)(window);class Cn{constructor(){this.digestedElements=new kn,this.selector="",this.subselector=""}observe(e,t,n){this.selector=e,this.subselector=t,this.callback=n,this.elementObserver=new En(this.digest.bind(this)),this.elementObserver.observe(document,{childList:!0,subtree:!0}),this.digest()}stop(){this.elementObserver&&this.elementObserver.disconnect()}digest(){let e=function(e,t){let n=[document];e=Te(e).split("..");let o=[];Te(e).forEach(((e,t)=>{t&&(n=Te(n).reduce(((e,t)=>t&&Te(t).parentElement?e.concat(Te(t).parentElement):e),Te([]))),n=Te(n).reduce(((t,n)=>{if(e)try{t=t.concat(...Te(n).querySelectorAll(e))}catch(e){}else t.push(n);return t}),Te([]))}));for(let r of n){let n=[r];if(t)try{n=Te(r).querySelectorAll(t)}catch(e){}o.push([r,n])}return o}(this.selector,this.subselector).filter((([e])=>!this.digestedElements.has(e)));this.callback(e);for(let[t]of e)this.digestedElements.add(t)}}let Mn=!1;function Tn(e,t=!1,...n){Mn&&console.log("%cMLDBG ♥ %c| %s%c |","color:cyan",t?"color:red":"color:inherit",e,"color:inherit",...n)}let Pn={nodeCount:0,organicCount:0,adCount:0,aaCount:0,times:[]};const On=5,Wn=7,Ln=window.self!==window.top;let{Map:Nn}=(void 0!==Te?Te:e=>e)(window),$n=new Nn,Dn=!1;bn["hide-if-matches-xpath3"]=function(e,t){let{mark:n,end:o}=Kt();const r=e=>""===e&&"http://www.w3.org/1999/xhtml";function i(e){return fontoxpath.evaluateXPathToNodes(e,document,null,null,{language:fontoxpath.evaluateXPath.XQUERY_3_1_LANGUAGE,namespaceResolver:r})}let s=ut("hide-if-matches-xpath3");const c=t=>{const r=new WeakSet,c=()=>{n();const t=i(e);for(const n of Te(t)){if(r.has(n))return!1;r.add(n),a(),Te(n).nodeType===vn?Ze(n):Te(n).textContent="",s("success","Matched: ",n," for selector: ",e)}o()},l=new yn(c),a=wt("hide-if-matches-xpath3",(()=>l.disconnect()));l.observe(t,{characterData:!0,childList:!0,subtree:!0}),c()};if(t){let e,n=0;const o=i(t),r=()=>{for(const e of Te(o))c(e),n++;n>0&&e.disconnect()};e=new yn(r),e.observe(document,{characterData:!0,childList:!0,subtree:!0}),r()}else c(document)},bn["hide-if-classifies"]=function(...e){let{debug:t,frameonly:n,failsafe:o,denoise:r,silent:i,model:s,selector:c,subselector:l}=function(e){if(!e||!Array.isArray(e)||!e.length)return{};let t=[],n={debug:!1,frameonly:!1,failsafe:!1,denoise:!1,silent:!1,model:"",selector:"",subselector:""};for(let o of e)o&&o in n?n[o]=!0:t.push(o);return t.length<2?{}:(n.model=t[0],t.splice(0,1),(t.length>2||t.some((e=>e&&e.startsWith('"'))))&&(t=t.join(" ").split('"').map((e=>e.trim())).filter((e=>e))),n.selector=t[0]||"",n.subselector=t[1]||"",n)}(e||[]);if(function(e){Mn=!!e}(t),"undefined"==typeof chrome||!chrome.runtime||!chrome.runtime.sendMessage)return Tn("environmental support",!1);if(!s||!c)return Tn("Invalid filter",!0);if(n&&!Ln)return;Ln||Tn(`Filter hit for ${s}: ${c} ${l}`);let a=new Cn,u=wt("hide-if-graph-matches",(()=>a.stop())),d=()=>{if($n.has(s))return $n.get(s);Tn(`Preparing worker with model ${s}`);let e=new Promise(((e,t)=>{let n=setTimeout((()=>{t(`Worker preparation with ${s} failed: service worker timeout`)}),1e4);h({type:"ML:prepare",debug:Mn,model:s},(o=>{clearTimeout(n),o&&"config"in o?(Tn(`Received config for ${s}`,!1,"config:",o.config),o.config.cutoff=o.cutoff,e(o.config)):t(`Worker preparation with ${s} failed`)}))}));return e.catch((e=>{})),$n.set(s,e),e},f=(e,t)=>{if(o&&Pn.nodeCount>=10&&Pn.adCount/Pn.nodeCount>=1)return Tn("Ad to non-ad ratio is 100%/0%. Stopping inference.",!0),a.stop();Tn(`Requesting inference with ${s}`,!1,"graph:",e),h({type:"ML:inference",debug:Mn,model:s,graph:e},(n=>{if(n&&"prediction"in n&&"boolean"==typeof n.prediction){if(Tn(`Received ${n.prediction} inference results with ${s}`,!1,"graph:",e),n.allowlisted&&!Dn&&(Dn=!0),function(e=!1,t=!1,n){Mn&&(Pn.nodeCount||Te(document).head.insertAdjacentHTML("beforeend",'\n        <style>body::before { display: block; position: fixed; pointer-events: none; top: 0; left: 0; z-index: 999999; background-color: rgba(0, 0, 0, 0.7); padding: 5px; content: "ad:\\9\\9 " var(--dbg-ad) "\\A nad:\\9\\9 " var(--dbg-nad) "\\A aa:\\9\\9 " var(--dbg-aa) "\\A time:\\9 " var(--dbg-t); font-size: 10px; white-space: pre-wrap; color: #fff; }</style>\n      ')),Pn.nodeCount++,t?Pn.aaCount++:e?Pn.adCount++:Pn.organicCount++,n&&Pn.times.push(n)}(n.prediction,n.allowlisted,n.digestTime-n.startTime),Dn&&!Mn)return a.stop();!n.prediction||Mn||i?Mn&&(n.allowlisted?Te(t).style.border="3px solid #00ffff":n.prediction?Te(t).style.border="3px solid #ff0000":n.prediction||(Te(t).style.border="3px solid #00ff00"),Mn&&(Te(document).body.style.setProperty("--dbg-ad",`"${Pn.adCount}"`),Te(document).body.style.setProperty("--dbg-nad",`"${Pn.organicCount}"`),Te(document).body.style.setProperty("--dbg-aa",`"${Pn.aaCount}"`),Te(document).body.style.setProperty("--dbg-t",`"${Pn.times.reduce(((e,t,n)=>e+(!n||n%3?t+"ms ":"\\A\\9\\9 "+t+"ms ")),"")}"`))):(u(),Ze(t))}else Tn(`Inference with ${s} failed`,!0,"graph:",e,"response:",n),!("error"in n)||n.error!==On&&n.error!==Wn||a.stop()}))},h=(e,t)=>{Dn?Mn&&t({prediction:!1,allowlisted:!0}):chrome.runtime.sendMessage(e,t)};a.observe(c,l,(e=>{if((!e||!e.length)&&Ln)return d();d().then((t=>{if(!t)return Promise.reject(`Config file for ${s} corrupted`);for(let[n,o]of e)for(let e of o)Tn(`Preparing inference with ${s}`,!1,"target:",n),xn({config:t},e,r).then((n=>r&&!n?xn({config:t},e,!1):n)).then((e=>f(e,n))).catch((e=>Tn(`domToGraph failed with error "${e}"`,!0,"target:",n)))})).catch((e=>{Tn(e,!0),a.stop()}))}))};
const snippets=bn;
let context;
for (const [name, ...args] of filters) {
if (snippets.hasOwnProperty(name)) {
try { context = snippets[name].apply(context, args); }
catch (error) { console.error(error); }
}
}
context = void 0;
})(e, ...t);
  
const callback = (environment, ...filters) => {
const e=Proxy,{apply:t,bind:n,call:r}=Function,o=r.bind(t),s=r.bind(n),i=r.bind(r),c={get:(e,t)=>s(r,e[t])},a=t=>new e(t,c),l=(t,n)=>new e(t,{apply:(e,t,r)=>o(n,t,r)}),u={get:(e,t)=>s(e[t],e)},p=t=>new e(t,u),{assign:f,defineProperties:d,freeze:h,getOwnPropertyDescriptor:w,getOwnPropertyDescriptors:g,getPrototypeOf:y}=p(Object),{hasOwnProperty:m}=a({}),{species:b}=Symbol,v={get(e,t){const n=e[t];class r extends n{}const o=g(n.prototype);delete o.constructor,h(d(r.prototype,o));const s=g(n);return delete s.length,delete s.prototype,s[b]={value:r},h(d(r,s))}},E=t=>new e(t,v),S="undefined"!=typeof environment?environment:{};"undefined"==typeof globalThis&&(window.globalThis=window);const{apply:x,ownKeys:M}=p(Reflect),T="world"in S,O=T&&"ISOLATED"===S.world,$=T&&"MAIN"===S.world,j="object"==typeof chrome&&!!chrome.runtime,P="object"==typeof browser&&!!browser.runtime,C=!$&&(O||j||P),k=e=>C?e:L(e,D(e)),{create:L,defineProperties:N,defineProperty:R,freeze:A,getOwnPropertyDescriptor:W,getOwnPropertyDescriptors:D}=p(Object),H=p(globalThis),z=C?globalThis:E(globalThis),{Map:B,RegExp:I,Set:U,WeakMap:F,WeakSet:q}=z,G=(e,t,n=null)=>{const r=M(t);for(const o of M(e)){if(r.includes(o))continue;const s=W(e,o);if(n&&"value"in s){const{value:e}=s;"function"==typeof e&&(s.value=n(e))}R(t,o,s)}},X=e=>{const t=z[e];class n extends t{}const{toString:r,valueOf:o}=t.prototype;N(n.prototype,{toString:{value:r},valueOf:{value:o}});const s=e.toLowerCase(),i=e=>function(){const t=x(e,this,arguments);return typeof t===s?new n(t):t};return G(t,n,i),G(t.prototype,n.prototype,i),n},J=A({frozen:new F,hidden:new q,iframePropertiesToAbort:{read:new U,write:new U},abortedIframes:new F}),V=new I("^[A-Z]");var _=new Proxy(new B([["chrome",C&&(j&&chrome||P&&browser)||void 0],["isExtensionContext",C],["variables",J],["console",k(console)],["document",globalThis.document],["performance",k(performance)],["JSON",k(JSON)],["Map",B],["Math",k(Math)],["Number",C?Number:X("Number")],["RegExp",I],["Set",U],["String",C?String:X("String")],["WeakMap",F],["WeakSet",q],["MouseEvent",MouseEvent]]),{get(e,t){if(e.has(t))return e.get(t);let n=globalThis[t];return"function"==typeof n&&(n=(V.test(t)?z:H)[t]),e.set(t,n),n},has:(e,t)=>e.has(t)});const K={WeakSet:WeakSet,WeakMap:WeakMap,WeakValue:class{has(){return!1}set(){}}},{apply:Y}=Reflect;const{Map:Z,WeakMap:Q,WeakSet:ee,setTimeout:te}=_;let ne=!0,re=e=>{e.clear(),ne=!ne};var oe=function(e){const{WeakSet:t,WeakMap:n,WeakValue:r}=this||K,o=new t,s=new n,i=new r;return function(t){if(o.has(t))return t;if(s.has(t))return s.get(t);if(i.has(t))return i.get(t);const n=Y(e,this,arguments);return o.add(n),n!==t&&("object"==typeof t&&t?s:i).set(t,n),n}}.bind({WeakMap:Q,WeakSet:ee,WeakValue:class extends Z{set(e,t){return ne&&(ne=!ne,te(re,0,this)),super.set(e,t)}}});const{concat:se,includes:ie,join:ce,reduce:ae,unshift:le}=a([]),ue=E(globalThis),{Map:pe,WeakMap:fe}=ue,de=new pe,he=t=>{const n=(e=>{const t=[];let n=e;for(;n;){if(de.has(n))le(t,de.get(n));else{const e=g(n);de.set(n,e),le(t,e)}n=y(n)}return le(t,{}),o(f,null,t)})("function"==typeof t?t.prototype:t),r={get(e,t){if(t in n){const{value:r,get:o}=n[t];if(o)return i(o,e);if("function"==typeof r)return s(r,e)}return e[t]},set(e,t,r){if(t in n){const{set:o}=n[t];if(o)return i(o,e,r),!0}return e[t]=r,!0}};return t=>new e(t,r)},{isExtensionContext:we,Array:ge,Number:ye,String:me,Object:be}=_,{isArray:ve}=ge,{getOwnPropertyDescriptor:Ee,setPrototypeOf:Se}=be,{toString:xe}=be.prototype,{slice:Me}=me.prototype,{get:Te}=Ee(Node.prototype,"nodeType"),Oe=we?{}:{Attr:he(Attr),CanvasRenderingContext2D:he(CanvasRenderingContext2D),CSSStyleDeclaration:he(CSSStyleDeclaration),Document:he(Document),Element:he(Element),HTMLCanvasElement:he(HTMLCanvasElement),HTMLElement:he(HTMLElement),HTMLImageElement:he(HTMLImageElement),HTMLScriptElement:he(HTMLScriptElement),MutationRecord:he(MutationRecord),Node:he(Node),ShadowRoot:he(ShadowRoot),get CSS2Properties(){return Oe.CSSStyleDeclaration}},$e=(e,t)=>{if("Element"!==t&&t in Oe)return Oe[t](e);if(ve(e))return Se(e,ge.prototype);const n=(e=>i(Me,i(xe,e),8,-1))(e);if(n in Oe)return Oe[n](e);if(n in _)return Se(e,_[n].prototype);if("nodeType"in e)switch(i(Te,e)){case 1:if(!(t in Oe))throw new Error("unknown hint "+t);return Oe[t](e);case 2:return Oe.Attr(e);case 3:return Oe.Node(e);case 9:return Oe.Document(e)}throw new Error("unknown brand "+n)};var je=we?e=>e===window||e===globalThis?_:e:oe(((e,t="Element")=>{if(e===window||e===globalThis)return _;switch(typeof e){case"object":return e&&$e(e,t);case"string":return new me(e);case"number":return new ye(e);default:throw new Error("unsupported value")}}));const Pe={get(e,t){const n=e;for(;!m(e,t);)e=y(e);const{get:r,set:s}=w(e,t);return function(){return arguments.length?o(s,n,arguments):i(r,n)}}},Ce=t=>new e(t,Pe);let ke=!1;function Le(){return ke}const{console:Ne}=je(window),Re=()=>{};function Ae(...e){if(Le()){const t=["%c DEBUG","font-weight: bold;"],n=e.indexOf("error"),r=e.indexOf("warn"),o=e.indexOf("success"),s=e.indexOf("info");-1!==n?(t[0]+=" - ERROR",t[1]+="color: red; border:2px solid red",je(e).splice(n,1)):-1!==r?(t[0]+=" - WARNING",t[1]+="color: orange; border:2px solid orange ",je(e).splice(r,1)):-1!==o?(t[0]+=" - SUCCESS",t[1]+="color: green; border:2px solid green",je(e).splice(o,1)):-1!==s&&(t[1]+="color: black;",je(e).splice(s,1)),je(e).unshift(...t)}Ne.log(...e)}function We(e){return s(Le()?Ae:Re,null,e)}let{Math:De,RegExp:He}=je(window);function ze(e){let{length:t}=e;if(t>1&&"/"===e[0]){let n="/"===e[t-1];if(n||t>2&&je(e).endsWith("/i")){let t=[je(e).slice(1,n?-1:-2)];return n||t.push("i"),new He(...t)}}return new He(je(e).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))}function Be(){return je(De.floor(2116316160*De.random()+60466176)).toString(36)}let{parseFloat:Ie,variables:Ue,Array:Fe,Error:qe,Map:Ge,Object:Xe,ReferenceError:Je,Set:Ve,WeakMap:_e}=je(window),{onerror:Ke}=Ce(window),Ye=Node.prototype,Ze=Element.prototype,Qe=null;function et(e,t,n,r=!0){let o=je(t),s=o.indexOf(".");if(-1==s){let o=Xe.getOwnPropertyDescriptor(e,t);if(o&&!o.configurable)return;let s=Xe.assign({},n,{configurable:r});if(!o&&!s.get&&s.set){let n=e[t];s.get=()=>n}return void Xe.defineProperty(e,t,s)}let i=o.slice(0,s).toString();t=o.slice(s+1).toString();let c=e[i];!c||"object"!=typeof c&&"function"!=typeof c||et(c,t,n);let a=Xe.getOwnPropertyDescriptor(e,i);if(a&&!a.configurable)return;Qe||(Qe=new _e),Qe.has(e)||Qe.set(e,new Ge);let l=Qe.get(e);if(l.has(i))return void l.get(i).set(t,n);let u=new Ge([[t,n]]);l.set(i,u),Xe.defineProperty(e,i,{get:()=>c,set(e){if(c=e,c&&("object"==typeof c||"function"==typeof c))for(let[e,t]of u)et(c,e,t)},configurable:r})}function tt(e){let t=Ke();Ke(((...n)=>{let r=n.length&&n[0];return!("string"!=typeof r||!je(r).includes(e))||("function"==typeof t?o(t,this,n):void 0)}))}function nt(e,t,n,r=!0){let o=We(e);if(!n)return void o("error","no property to abort on read");let s=Be();o("info",`aborting on ${n} access`),et(t,n,{get:function(){throw o("success",`${n} access aborted`),new Je(s)},set(){}},r),tt(s)}function rt(e,t,n,r=!0){let o=We(e);if(!n)return void o("error","no property to abort on write");let s=Be();o("info",`aborting when setting ${n}`),et(t,n,{set:function(){throw o("success",`setting ${n} aborted`),new Je(s)}},r),tt(s)}function ot(e,t=!1,n=!1){let r=Ue.abortedIframes,s=Ue.iframePropertiesToAbort;for(let o of Fe.from(window.frames))if(r.has(o))for(let s of e)t&&r.get(o).read.add(s),n&&r.get(o).write.add(s);for(let r of e)t&&s.read.add(r),n&&s.write.add(r);function c(){for(let e of Fe.from(window.frames)){r.has(e)||r.set(e,{read:new Ve(s.read),write:new Ve(s.write)});let t=r.get(e).read;if(t.size>0){let n=Fe.from(t);t.clear();for(let t of n)nt("abort-on-iframe-property-read",e,t)}let n=r.get(e).write;if(n.size>0){let t=Fe.from(n);n.clear();for(let n of t)rt("abort-on-iframe-property-write",e,n)}}}c(),r.has(document)||(r.set(document,!0),function(e){let t;function n(e,t){for(let n of t){et(e,n,r(e,n))}}function r(t,n){let r=t[n];return{get:()=>function(...t){let n;return n=o(r,this,t),e&&e(),n}}}function s(t,n){let r=Xe.getOwnPropertyDescriptor(t,n),{set:o}=r||{};return{set(t){let n;return n=i(o,this,t),e&&e(),n}}}n(Ye,["appendChild","insertBefore","replaceChild"]),n(Ze,["append","prepend","replaceWith","after","before","insertAdjacentElement","insertAdjacentHTML"]),t=s(Ze,"innerHTML"),et(Ze,"innerHTML",t),t=s(Ze,"outerHTML"),et(Ze,"outerHTML",t)}(c))}let{Object:st}=window;function it(e,t){if(!(e instanceof st))return;let n=e,r=je(t).split(".");if(0===r.length)return;for(let e=0;e<r.length-1;e++){let t=r[e];if(!m(n,t))return;if(n=n[t],!(n instanceof st))return}let o=r[r.length-1];return m(n,o)?[n,o]:void 0}const ct=je(/^\d+$/);function at(e){switch(e){case"false":return!1;case"true":return!0;case"null":return null;case"noopFunc":return()=>{};case"trueFunc":return()=>!0;case"falseFunc":return()=>!1;case"emptyArray":return[];case"emptyObj":return{};case"undefined":return;case"":return e;default:if(ct.test(e))return Ie(e);throw new qe(`[override-property-read snippet]: Value "${e}" is not valid.`)}}let{HTMLScriptElement:lt,Object:ut,ReferenceError:pt}=je(window),ft=ut.getPrototypeOf(lt);let{Error:dt,URL:ht}=je(window),{cookie:wt}=Ce(document);let{console:gt,document:yt,getComputedStyle:mt,isExtensionContext:bt,variables:vt,Array:Et,MutationObserver:St,Object:xt,XPathEvaluator:Mt,XPathExpression:Tt,XPathResult:Ot}=je(window);const{querySelectorAll:$t}=yt,jt=$t&&s($t,yt);function Pt(e,t=!1){return Lt(e,jt.bind(yt),yt,t)}function Ct(e,t,n,r){const o=t.getAttribute("xlink:href")||t.getAttribute("href");if(o){const i=jt(o)[0];if(!i&&Le())return gt.log("No elements found matching",o),!1;if(!(s=e)||0===s.length||s.every((e=>""===e.trim()))){const e=r.length>0?r:[];return n.push({element:i,rootParents:[...e,t]}),!1}const c=i.querySelectorAll.bind(i);return{nextBoundElement:i,nestedSelectorsString:e.join("^^"),next$$:c}}var s}function kt(e,t){const n=function(e,t=!1){try{const n=navigator.userAgent.includes("Firefox")?e.openOrClosedShadowRoot:browser.dom.openOrClosedShadowRoot(e);return null===n&&Le()&&!t&&gt.log("Shadow root not found or not added in element yet",e),n}catch(n){return Le()&&!t&&gt.log("Error while accessing shadow root",e,n),null}}(t);if(n){const{querySelectorAll:r}=n,o=r&&s(r,n).bind(n);return{nextBoundElement:t,nestedSelectorsString:":host "+e.join("^^"),next$$:o}}return!1}function Lt(e,t,n,r,o=[]){if(e.includes("^^")){const[s,i,...c]=e.split("^^");let a,l;switch(i){case"svg":l=Ct;break;case"sh":l=kt;break;default:return Le()&&gt.log(i," is not supported. Supported commands are: \n^^sh^^\n^^svg^^"),[]}a=""===s.trim()?[n]:t(s);const u=[];for(const e of a){const t=l(c,e,u,o);if(!t)continue;const{next$$:n,nestedSelectorsString:s,nextBoundElement:i}=t,a=Lt(s,n,i,r,[...o,e]);a&&u.push(...a)}return u}const s=t(e);return r?[...s].map((e=>({element:e,rootParents:o.length>0?o:[]}))):s}const{assign:Nt,setPrototypeOf:Rt}=xt;class At extends Tt{evaluate(...e){return Rt(o(super.evaluate,this,e),Ot.prototype)}}class Wt extends Mt{createExpression(...e){return Rt(o(super.createExpression,this,e),At.prototype)}}function Dt(e){if(vt.hidden.has(e))return!1;!function(e){bt&&"function"==typeof checkElement&&checkElement(e)}(e),vt.hidden.add(e);let{style:t}=je(e),n=je(t,"CSSStyleDeclaration"),r=je([]),{debugCSSProperties:o}=S;for(let[e,t]of o||[["display","none"]])n.setProperty(e,t,"important"),r.push([e,n.getPropertyValue(e)]);return new St((()=>{for(let[e,t]of r){let r=n.getPropertyValue(e),o=n.getPropertyPriority(e);r==t&&"important"==o||n.setProperty(e,t,"important")}})).observe(e,{attributes:!0,attributeFilter:["style"]}),!0}function Ht(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let t=function(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let e=t.slice(6,-1),n=(new Wt).createExpression(e,null),r=Ot.ORDERED_NODE_SNAPSHOT_TYPE;return e=>{if(!e)return;let t=n.evaluate(yt,r,null),{snapshotLength:o}=t;for(let n=0;n<o;n++)e(t.snapshotItem(n))}}return t=>Pt(e).forEach(t)}(e);return()=>{let e=je([]);return t((t=>e.push(t))),e}}return()=>Et.from(Pt(e))}let{ELEMENT_NODE:zt,TEXT_NODE:Bt,prototype:It}=Node,{prototype:Ut}=Element,{prototype:Ft}=HTMLElement,{console:qt,variables:Gt,DOMParser:Xt,Error:Jt,MutationObserver:Vt,Object:_t,ReferenceError:Kt}=je(window),{getOwnPropertyDescriptor:Yt}=_t;je(window);const{Map:Zt,MutationObserver:Qt,Object:en,Set:tn,WeakSet:nn}=je(window);let rn=Element.prototype,{attachShadow:on}=rn,sn=new nn,cn=new Zt,an=null;const{Error:ln,JSON:un,Map:pn,Response:fn,Object:dn}=je(window);let hn=null;let{Error:wn,JSON:gn,Map:yn,Object:mn,Response:bn}=je(window),vn=null;let{Error:En}=je(window);let{Error:Sn,Map:xn,Object:Mn,console:Tn}=je(window),{toString:On}=Function.prototype,$n=EventTarget.prototype,{addEventListener:jn}=$n,Pn=null;let Cn,{fetch:kn,Map:Ln,Object:Nn,RegExp:Rn,Response:An}=je(window);let Wn,Dn,{RegExp:Hn,XMLHttpRequest:zn,WeakMap:Bn}=je(window);let In,{URL:Un,fetch:Fn}=je(window),{delete:qn,has:Gn}=a(URLSearchParams.prototype);const Xn={"abort-current-inline-script":function(e,t=null){const n=We("abort-current-inline-script"),r=t?ze(t):null,o=Be(),s=je(document).currentScript;let c=window;const a=je(e).split("."),l=je(a).pop();for(let e of je(a))if(c=c[e],!c||"object"!=typeof c&&"function"!=typeof c)return void n("warn",a," is not found");const{get:u,set:p}=ut.getOwnPropertyDescriptor(c,l)||{};let f=c[l];void 0===f&&n("warn","The property",l,"doesn't exist yet. Check typos.");const d=()=>{const e=je(document).currentScript;if(e instanceof ft&&""==je(e,"HTMLScriptElement").src&&e!=s&&(!r||r.test(je(e).textContent)))throw n("success",a," is aborted \n",e),new pt(o)};et(c,l,{get(){return d(),u?i(u,this):f},set(e){d(),p?i(p,this,e):f=e}}),tt(o)},"abort-on-iframe-property-read":function(...e){ot(e,!0,!1)},"abort-on-iframe-property-write":function(...e){ot(e,!1,!0)},"abort-on-property-read":function(e,t){nt("abort-on-property-read",window,e,!("false"===t))},"abort-on-property-write":function(e,t){rt("abort-on-property-write",window,e,!("false"===t))},"cookie-remover":function(e,t=!1){if(!e)throw new dt("[cookie-remover snippet]: No cookie to remove.");let n=We("cookie-remover"),r=ze(e);if(!je(/^http|^about/).test(location.protocol))return void n("warn","Snippet only works for http or https and about.");function o(){return je(wt()).split(";").filter((e=>r.test(je(e).split("=")[0])))}const s=()=>{n("info","Parsing cookies for matches");for(const e of je(o())){let t=je(location.hostname);!t&&je(location.ancestorOrigins)&&je(location.ancestorOrigins[0])&&(t=new ht(je(location.ancestorOrigins[0])).hostname);const r=je(e).split("=")[0],o="expires=Thu, 01 Jan 1970 00:00:00 GMT",s="path=/",i=t.split(".");for(let e=i.length;e>0;e--){const t=i.slice(i.length-e).join(".");wt(`${je(r).trim()}=;${o};${s};domain=${t}`),wt(`${je(r).trim()}=;${o};${s};domain=.${t}`),n("success",`Set expiration date on ${r}`)}}};if(s(),t){let e=o();setInterval((()=>{let t=o();if(t!==e)try{s()}finally{e=t}}),1e3)}},debug:function(){ke=!0},"freeze-element":function(e,t="",...n){let r,s,c=!1,a=!1,l=je(n).filter((e=>!h(e))),u=je(n).filter((e=>h(e))).map(ze),p=Be(),f=Ht(e);!function(){let n=je(t).split("+");1===n.length&&""===n[0]&&(n=[]);for(let t of n)switch(t){case"subtree":c=!0;break;case"abort":a=!0;break;default:throw new Jt("[freeze] Unknown option passed to the snippet. [selector]: "+e+" [option]: "+t)}}();let d={selector:e,shouldAbort:a,rid:p,exceptionSelectors:l,regexExceptions:u,changeId:0};function h(e){return e.length>=2&&"/"==e[0]&&"/"==e[e.length-1]}function w(){s=f(),g(s,!1)}function g(e,t=!0){for(let n of e)Gt.frozen.has(n)||(Gt.frozen.set(n,d),!t&&c&&new Vt((e=>{for(let t of je(e))g(je(t,"MutationRecord").addedNodes)})).observe(n,{childList:!0,subtree:!0}),c&&je(n).nodeType===zt&&g(je(n).childNodes))}function y(e,...t){Ae(`[freeze][${e}] `,...t)}function m(e,t,n,r){let o=r.selector,s=r.changeId,i="string"==typeof e,c=r.shouldAbort?"aborting":"watching";switch(qt.groupCollapsed(`[freeze][${s}] ${c}: ${o}`),n){case"appendChild":case"append":case"prepend":case"insertBefore":case"replaceChild":case"insertAdjacentElement":case"insertAdjacentHTML":case"insertAdjacentText":case"innerHTML":case"outerHTML":y(s,i?"text: ":"node: ",e),y(s,"added to node: ",t);break;case"replaceWith":case"after":case"before":y(s,i?"text: ":"node: ",e),y(s,"added to node: ",je(t).parentNode);break;case"textContent":case"innerText":case"nodeValue":y(s,"content of node: ",t),y(s,"changed to: ",e)}y(s,`using the function "${n}"`),qt.groupEnd(),r.changeId++}function b(e,t){if(t)for(let n of t)if(n.test(e))return!0;return!1}function v(e){throw new Kt(e)}function E(e,t,n,r){let o=new Xt,{body:s}=je(o.parseFromString(e,"text/html")),i=S(je(s).childNodes,t,n,r);return je(i).map((e=>{switch(je(e).nodeType){case zt:return je(e).outerHTML;case Bt:return je(e).textContent;default:return""}})).join("")}function S(e,t,n,r){let o=je([]);for(let s of e)x(s,t,n,r)&&o.push(s);return o}function x(e,t,n,r){let o=r.shouldAbort,s=r.regexExceptions,i=r.exceptionSelectors,c=r.rid;if("string"==typeof e){let i=e;return!!b(i,s)||(Le()&&m(i,t,n,r),o&&v(c),Le())}let a=e;switch(je(a).nodeType){case zt:return!!function(e,t){if(t){let n=je(e);for(let e of t)if(n.matches(e))return!0}return!1}(a,i)||(o&&(Le()&&m(a,t,n,r),v(c)),!!Le()&&(Dt(a),m(a,t,n,r),!0));case Bt:return!!b(je(a).textContent,s)||(Le()&&m(a,t,n,r),o&&v(c),!1);default:return!0}}function M(e,t,n,r){let s=Yt(e,t)||{},c=s.get&&i(s.get,e)||s.value;if(c)return{get:()=>function(...e){if(n(this)){let n=r(this);if(n){let r=e[0];if(!x(r,this,t,n))return r}}return o(c,this,e)}}}function T(e,t,n,r){let s=Yt(e,t)||{},c=s.get&&i(s.get,e)||s.value;if(c)return{get:()=>function(...e){if(!n(this))return o(c,this,e);let s=r(this);if(!s)return o(c,this,e);let i=S(e,this,t,s);return i.length>0?o(c,this,i):void 0}}}function O(e,t,n,r){let s=Yt(e,t)||{},c=s.get&&i(s.get,e)||s.value;if(c)return{get:()=>function(...e){let[s,a]=e,l="afterbegin"===s||"beforeend"===s;if(n(this,l)){let e=r(this,l);if(e){let n,r=l?this:je(this).parentNode;switch(t){case"insertAdjacentElement":if(!x(a,r,t,e))return a;break;case"insertAdjacentHTML":return n=E(a,r,t,e),n?i(c,this,s,n):void 0;case"insertAdjacentText":if(!x(a,r,t,e))return}}}return o(c,this,e)}}}function $(e,t,n,r){let o=Yt(e,t)||{},{set:s}=o;if(s)return{set(e){if(!n(this))return i(s,this,e);let o=r(this);if(!o)return i(s,this,e);let c=E(e,this,t,o);return c?i(s,this,c):void 0}}}function j(e,t,n,r){let o=Yt(e,t)||{},{set:s}=o;if(s)return{set(e){if(!n(this))return i(s,this,e);let o=r(this);return o?x(e,this,t,o)?i(s,this,e):void 0:i(s,this,e)}}}Gt.frozen.has(document)||(Gt.frozen.set(document,!0),function(){let e;function t(e){return e&&Gt.frozen.has(e)}function n(e){try{return e&&(Gt.frozen.has(e)||Gt.frozen.has(je(e).parentNode))}catch(e){return!1}}function r(e,t){try{return e&&(Gt.frozen.has(e)&&t||Gt.frozen.has(je(e).parentNode)&&!t)}catch(e){return!1}}function o(e){return Gt.frozen.get(e)}function s(e){try{if(Gt.frozen.has(e))return Gt.frozen.get(e);let t=je(e).parentNode;return Gt.frozen.get(t)}catch(e){}}function i(e,t){try{if(Gt.frozen.has(e)&&t)return Gt.frozen.get(e);let n=je(e).parentNode;return Gt.frozen.get(n)}catch(e){}}e=M(It,"appendChild",t,o),et(It,"appendChild",e),e=M(It,"insertBefore",t,o),et(It,"insertBefore",e),e=M(It,"replaceChild",t,o),et(It,"replaceChild",e),e=T(Ut,"append",t,o),et(Ut,"append",e),e=T(Ut,"prepend",t,o),et(Ut,"prepend",e),e=T(Ut,"replaceWith",n,s),et(Ut,"replaceWith",e),e=T(Ut,"after",n,s),et(Ut,"after",e),e=T(Ut,"before",n,s),et(Ut,"before",e),e=O(Ut,"insertAdjacentElement",r,i),et(Ut,"insertAdjacentElement",e),e=O(Ut,"insertAdjacentHTML",r,i),et(Ut,"insertAdjacentHTML",e),e=O(Ut,"insertAdjacentText",r,i),et(Ut,"insertAdjacentText",e),e=$(Ut,"innerHTML",t,o),et(Ut,"innerHTML",e),e=$(Ut,"outerHTML",n,s),et(Ut,"outerHTML",e),e=j(It,"textContent",t,o),et(It,"textContent",e),e=j(Ft,"innerText",t,o),et(Ft,"innerText",e),e=j(It,"nodeValue",t,o),et(It,"nodeValue",e)}()),r=new Vt(w),r.observe(document,{childList:!0,subtree:!0}),w()},"hide-if-shadow-contains":function(e,t="*"){let n=`${e}\\${t}`;cn.has(n)||cn.set(n,[ze(e),t,Re]);const r=We("hide-if-shadow-contain");an||(an=new Qt((e=>{let t=new tn;for(let{target:n}of je(e)){let e=je(n).parentNode;for(;e;)[n,e]=[e,je(n).parentNode];if(!sn.has(n)&&!t.has(n)){t.add(n);for(let[e,t,o]of cn.values())if(e.test(je(n).textContent)){let e=je(n.host).closest(t);e&&(o(),je(n).appendChild(document.createElement("style")).textContent=":host {display: none !important}",Dt(e),sn.add(n),r("success","Hiding: ",e," for params: ",...arguments))}}}})),en.defineProperty(rn,"attachShadow",{value:l(on,(function(){let e=o(on,this,arguments);return r("info","attachShadow is called for: ",e),an.observe(e,{childList:!0,characterData:!0,subtree:!0}),e}))}))},"json-override":function(e,t,n="",r=""){if(!e)throw new ln("[json-override snippet]: Missing paths to override.");if(void 0===t)throw new ln("[json-override snippet]: No value to override with.");if(!hn){let s=We("json-override");function i(e,t){for(let{prune:n,needle:r,filter:o,value:i}of hn.values())if(!o||o.test(t)){if(je(r).some((t=>!it(e,t))))return e;for(let t of n){let n=it(e,t);void 0!==n&&(s("success",`Found ${t} replaced it with ${i}`),n[0][n[1]]=at(i))}}return e}let{parse:c}=un;hn=new pn,dn.defineProperty(window.JSON,"parse",{value:l(c,(function(e){return i(o(c,this,arguments),e)}))}),s("info","Wrapped JSON.parse for override");let{json:a}=fn.prototype;dn.defineProperty(window.Response.prototype,"json",{value:l(a,(function(e){return o(a,this,arguments).then((t=>i(t,e)))}))}),s("info","Wrapped Response.json for override")}hn.set(e,{prune:je(e).split(/ +/),needle:n.length?je(n).split(/ +/):[],filter:r?ze(r):null,value:t})},"json-prune":function(e,t=""){if(!e)throw new wn("Missing paths to prune");if(!vn){let n=We("json-prune");function r(e){for(let{prune:t,needle:r}of vn.values()){if(je(r).some((t=>!it(e,t))))return e;for(let r of t){let t=it(e,r);void 0!==t&&(n("success",`Found ${r} and deleted`),delete t[0][t[1]])}}return e}let{parse:s}=gn;vn=new yn,mn.defineProperty(window.JSON,"parse",{value:l(s,(function(){return r(o(s,this,arguments))}))}),n("info","Wrapped JSON.parse for prune");let{json:i}=bn.prototype;mn.defineProperty(window.Response.prototype,"json",{value:l(i,(function(){return o(i,this,arguments).then((e=>r(e)))}))}),n("info","Wrapped Response.json for prune")}vn.set(e,{prune:je(e).split(/ +/),needle:t.length?je(t).split(/ +/):[]})},"override-property-read":function(e,t,n){if(!e)throw new En("[override-property-read snippet]: No property to override.");if(void 0===t)throw new En("[override-property-read snippet]: No value to override with.");let r=We("override-property-read"),o=at(t);r("info",`Overriding ${e}.`);const s=!("false"===n);et(window,e,{get:()=>(r("success",`${e} override done.`),o),set(){}},s)},"prevent-listener":function(e,t,n){if(!e)throw new Sn("[prevent-listener snippet]: No event type.");if(!Pn){Pn=new xn;let e=We("[prevent]");Mn.defineProperty($n,"addEventListener",{value:l(jn,(function(t,n){for(let{evt:r,handlers:o,selectors:s}of Pn.values()){if(!r.test(t))continue;let c=this instanceof Element;for(let a=0;a<o.length;a++){const l=o[a],u=s[a];if(!u||c&&je(this).matches(u)){if(l){const t=function(){try{const e=String("function"==typeof n?n:n.handleEvent);return l.test(e)}catch(t){return e("error","Error while trying to stringify listener: ",t),!1}};if(!function(){try{const e=i(On,"function"==typeof n?n:n.handleEvent);return l.test(e)}catch(t){return e("error","Error while trying to stringify listener: ",t),!1}}()&&!t())continue}return void(Le()&&(Tn.groupCollapsed("DEBUG [prevent] was successful"),e("success",`type: ${t} matching ${r}`),e("success","handler:",n),l&&e("success",`matching ${l}`),u&&e("success","on element: ",this,` matching ${u}`),e("success","was prevented from being added"),Tn.groupEnd()))}}}return o(jn,this,arguments)}))}),e("info","Wrapped addEventListener")}Pn.has(e)||Pn.set(e,{evt:ze(e),handlers:[],selectors:[]});let{handlers:r,selectors:s}=Pn.get(e);r.push(t?ze(t):null),s.push(n)},"replace-fetch-response":function(e,t="",n=null){const r=We("replace-fetch-response");if(!e)return void r("error","The parameter 'search' is required");Cn||(Cn=new Ln,r("info","Network API proxied"),window.fetch=l(kn,((...e)=>o(kn,self,e).then((e=>je(e).clone().text().then((t=>{let n=je(t);for(const[e,{replacement:o,needle:s}]of Cn){if(s){if(!ze(s).test(n)){Le()&&(console.groupCollapsed(`DEBUG [replace-fetch-response] warn: '${s}' not found in fetch response`),r("warn",`${n}`),console.groupEnd());continue}Le()&&(console.groupCollapsed(`DEBUG [replace-fetch-response] success: '${s}' found in fetch response`),r("success",`${n}`),console.groupEnd())}n=n.replace(e,o),Le()&&n!==t&&(console.groupCollapsed(`DEBUG [replace-fetch-response] success: '${e}' replaced with '${o}' in fetch response`),r("success",`${n}`),console.groupEnd())}if(n===t)return e;const o=new An(n,{status:e.status,statusText:e.statusText,headers:e.headers});return Nn.defineProperties(o,{ok:{value:e.ok},redirected:{value:e.redirected},type:{value:e.type},url:{value:e.url}}),o})))))));const s=ze(e),i=new Rn(s,"g");Cn.set(i,{replacement:t,needle:n})},"replace-xhr-response":function(e,t="",n=null){const r=We("replace-xhr-response");if(!e)return void r("error","The parameter 'pattern' is required");Wn||(Wn=new Bn,Dn=new Map,r("info","XMLHttpRequest proxied"),window.XMLHttpRequest=class extends zn{open(e,t,...n){const r={method:e,url:t};return Wn.set(this,r),super.open(e,t,...n)}get response(){const e=super.response,t=Wn.get(this);if(void 0===t)return e;const n="string"==typeof e?e.length:void 0;if(t.lastResponseLength!==n&&(t.response=void 0,t.lastResponseLength=n),void 0!==t.response)return t.response;if("string"!=typeof e)return t.response=e;let o=e;for(const[t,{replacement:n,needle:s}]of Dn){if(s){if(!ze(s).test(o)){Le()&&(console.groupCollapsed(`DEBUG [replace-xhr-response] warn: '${s}' not found in XHR response`),r("warn",`${o}`),console.groupEnd());continue}Le()&&(console.groupCollapsed(`DEBUG [replace-xhr-response] success: '${s}' found in XHR response`),r("success",`${o}`),console.groupEnd())}o=je(o).replace(t,n).toString(),Le()&&e!==o&&(console.groupCollapsed(`DEBUG [replace-xhr-response] success: '${t}' replaced with '${n}' in XHR response`),r("success",`${o}`),console.groupEnd())}return t.response=o}get responseText(){const e=this.response;return"string"!=typeof e?super.responseText:e}});const o=ze(e),s=new Hn(o,"g");Dn.set(s,{replacement:t,needle:n})},"strip-fetch-query-parameter":function(e,t=null){const n=We("strip-fetch-query-parameter");In||(In=new Map,window.fetch=l(Fn,((...e)=>{let[t]=e;if("string"==typeof t){let r=new Un(t);for(let[o,s]of In)s&&!s.test(t)||Gn(r.searchParams,o)&&(n("success",`${o} has been stripped from url ${t}`),qn(r.searchParams,o),e[0]=r.href)}return o(Fn,self,e)}))),In.set(e,t&&ze(t))},trace:function(...e){o(Ae,null,e)}};
const snippets=Xn;
let context;
for (const [name, ...args] of filters) {
if (snippets.hasOwnProperty(name)) {
try { context = snippets[name].apply(context, args); }
catch (error) { console.error(error); }
}
}
context = void 0;
};
const graph = new Map([["abort-current-inline-script",null],["abort-on-iframe-property-read",null],["abort-on-iframe-property-write",null],["abort-on-property-read",null],["abort-on-property-write",null],["cookie-remover",null],["debug",null],["freeze-element",null],["hide-if-shadow-contains",null],["json-override",null],["json-prune",null],["override-property-read",null],["prevent-listener",null],["replace-fetch-response",null],["replace-xhr-response",null],["strip-fetch-query-parameter",null],["trace",null]]);
callback.get = snippet => graph.get(snippet);
callback.has = snippet => graph.has(snippet);

  if (t.every(([name]) => !callback.has(name))) return;
  const append = () => {
    URL.revokeObjectURL(
      Object.assign(
        document.documentElement.appendChild(document.createElement("script")),
        {async: false, src: URL.createObjectURL(new Blob([
          "(" + callback + ")(..." + JSON.stringify([e, ...t]) + ")"
        ]))}
      ).src
    );
  };
  try { append(); }
  catch (_) {
    document.addEventListener("readystatechange", append, {once:true});
  }
}